<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>החבר הכי לא צפוי של זוהר (גרסה משופרת)</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        :root {
            --primary-color: #3f51b5;
            --secondary-color: #1a237e;
            --accent-color: #ffeb3b;
            --background-color: #f5f7fa;
            --page-bg-color: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: 'Assistant', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.9;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .book-container {
            width: 100%;
            max-width: 900px;
            background-color: var(--page-bg-color);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid #ddd;
        }

        .book-header {
            padding: 20px 30px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .book-header h2 {
            margin: 0;
            font-size: 1.2em;
            color: var(--primary-color);
        }

        #share-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #share-btn:hover {
            background-color: var(--secondary-color);
            transform: scale(1.05);
        }
        
        #share-btn .fa-share-alt {
            font-size: 1.1em;
        }

        .page {
            padding: 30px 40px;
        }
        
        .cover-page {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            text-align: center;
        }

        .cover-page h1, .cover-page h2 {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
        }
        
        .cover-page h1 {
            font-size: 3.5em;
            margin-bottom: 10px;
        }

        .cover-page h2 {
            font-size: 1.5em;
            font-weight: 400;
            opacity: 0.9;
        }

        .dedication {
            text-align: center;
            font-style: italic;
            color: #666;
        }

        .content-page h3 {
            font-size: 2.2em;
            font-weight: 700;
            color: var(--primary-color);
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .text-block {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            font-size: 1.25em;
            margin-bottom: 1em;
            text-align: justify;
        }
        
        .play-audio-btn {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 1.5em; /* Larger icon */
            cursor: pointer;
            padding: 5px;
            margin-top: 2px;
            transition: color 0.3s, transform 0.2s;
            flex-shrink: 0; /* Prevents button from shrinking */
        }
        
        .play-audio-btn:hover {
            color: var(--secondary-color);
            transform: scale(1.2);
        }
        
        .play-audio-btn.playing {
            color: #ff4081; /* Pink color when playing */
        }
        
        .text-block p {
            margin: 0;
            flex-grow: 1; /* Allows text to take available space */
        }

        .illustration {
            width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin: 25px 0;
            border: 5px solid white;
        }

        .the-end {
            text-align: center;
            font-size: 2em;
            font-weight: 700;
            color: var(--primary-color);
            padding: 40px;
        }
        
        /* Toast notification for copy link */
        #toast {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            font-size: 1em;
            z-index: 1000;
            transition: bottom 0.5s ease-in-out;
        }

        #toast.show {
            bottom: 30px;
        }

    </style>
</head>
<body>

    <div class="book-container">
        
        <header class="book-header">
            <h2>הספר האינטראקטיבי שלך</h2>
            <button id="share-btn">
                <i class="fas fa-share-alt"></i>
                <span>שתף את הספר</span>
            </button>
        </header>

        <main>
            <section class="page cover-page">
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא כותרת"><i class="fas fa-volume-up"></i></button>
                    <h1>החבר הכי לא צפוי של זוהר</h1>
                </div>
                <div class="text-block">
                     <button class="play-audio-btn" aria-label="הקרא שם מחבר"><i class="fas fa-volume-up"></i></button>
                     <h2>מאת: ג'מיני</h2>
                </div>
                <img src="https://placehold.co/700x400/3f51b5/ffffff?text=%D7%96%D7%95%D7%94%D7%A8+%D7%94%D7%92%D7%97%D7%9C%D7%99%D7%9C%D7%99%D7%AA+%D7%95%D7%A8%D7%A7%D7%A9+%D7%94%D7%A2%D7%9B%D7%91%D7%99%D7%A9" alt="זוהר הגחלילית ורקש העכביש על קור עכביש זוהר" class="illustration">
            </section>
            
            <section class="page dedication">
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא הקדשה"><i class="fas fa-volume-up"></i></button>
                    <p>מוקדש לכל הילדים האמיצים שמגלים שאור קטן יכול לעשות שינוי גדול,<br>ושחברות יכולה להסתתר במקומות הכי לא צפויים.</p>
                </div>
            </section>
            
            <article class="page content-page">
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא כותרת פרק"><i class="fas fa-volume-up"></i></button>
                    <h3>פרק 1: גחלילית שלא אוהבת את החושך</h3>
                </div>
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>עמוק בתוך "יער הפלאות", בין פטריות זוהרות ופרחים שמנגנים לפני השינה, חיה משפחה גדולה של גחליליות. בכל לילה, כשהשמש אמרה שלום והלכה לישון, הן היו יוצאות כולן יחד ל"ריקוד האורות" הגדול. הן היו מרחפות מעלה ומטה, מציירות שבילים של זהב באוויר החשוך.</p>
                </div>
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>אבל גחלילית אחת קטנה, בשם זוהר, לא כל כך אהבה את הריקוד. למעשה, זוהר קצת פחד מהחושך. "אבל אתה גחלילית," אמר לו אבא שלו, "האור שלך נועד להאיר את החושך." "אני יודע," לחש זוהר, "אבל כשאני לבד, האור שלי מרגיש קטן... והחושך מרגיש גדול מאוד."</p>
                </div>
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>ערב אחד, בזמן ריקוד האורות, משב רוח שובב הפריד את זוהר ממשפחתו. הוא התגלגל והסתחרר, עד שנחת לבדו על עלה גדול ורטוב. הוא הדליק את האור הקטן שלו וכיבה אותו. הדליק וכיבה. מסביבו, היער היה שקט וחשוך. הוא היה לבד לגמרי.</p>
                </div>
                <img src="https://placehold.co/700x350/5d4037/f5f5f5?text=%D7%96%D7%95%D7%94%D7%A8+%D7%9C%D7%91%D7%93+%D7%A2%D7%9C+%D7%A2%D7%9C%D7%94+%D7%91%D7%99%D7%A2%D7%A8" alt="זוהר הקטן יושב לבדו על עלה גדול ביער חשוך" class="illustration">
            </article>

            <article class="page content-page">
                 <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא כותרת פרק"><i class="fas fa-volume-up"></i></button>
                    <h3>פרק 2: מפגש דביק</h3>
                </div>
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>זוהר אזר אומץ והחליט לחפש את משפחתו. הוא עף לאט ובזהירות בין העצים, כשהאור הקטן שלו מהבהב בפחד. "הלו?" הוא קרא בקול רועד, "אמא? אבא?" אבל רק הד קולו ענה לו.</p>
                </div>
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>לפתע, הוא הרגיש שמשהו דביק תפס את רגלו. הוא נמשך אחורה ונתקע! הוא ניסה למשוך, אבל נתקע חזק יותר. הוא האיר את האור שלו הכי חזק שיכל וראה שהוא נלכד ברשת מבריקה וגדולה, שנראתה כמו תחרה של טיפות טל. "אוי לא," הוא מילמל, "נפלתי על קורי עכביש!"</p>
                </div>
                <img src="https://placehold.co/700x400/78909c/ffffff?text=%D7%96%D7%95%D7%94%D7%A8+%D7%AA%D7%A7%D7%95%D7%A2+%D7%91%D7%A7%D7%95%D7%A8%D7%99+%D7%A2%D7%9B%D7%91%D7%99%D7%A9" alt="זוהר לכוד בקור עכביש מבריק" class="illustration">
                 <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>מתוך הצללים יצאה דמות. זה היה עכביש גדול ואפרורי, עם שמונה רגליים ארוכות ומשקפיים קטנים על קצה אפו. "ובכן, ובכן," אמר העכביש בקול עמוק וקצת צרוד, "מה יש לנו כאן? פנס קטן ומזמזם." זוהר רעד כולו. "בבקשה, אדון עכביש, אל תאכל אותי! הלכתי לאיבוד!"</p>
                </div>
            </article>
            
            <article class="page content-page">
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא כותרת פרק"><i class="fas fa-volume-up"></i></button>
                    <h3>פרק 3: רקש האורג</h3>
                </div>
                 <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>העכביש גיחך. "לאכול אותך? ילד קטן, אני צמחוני. חוץ מזה, אתה כל כך קטן, בקושי תספיק לקינוח." הוא התקרב בזהירות. "שמי רקש, ואת הקורים האלה אני אורג כבר שנים. הם יצירת האמנות שלי."</p>
                </div>
                 <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>זוהר הביט סביבו. עכשיו, כשהפחד קצת התפוגג, הוא ראה שהקורים היו יפהפיים. האור שלו נשבר עליהם לאלפי יהלומים זוהרים. "וואו," אמר זוהר, "זה... יפהפה." רקש נראה מופתע ושמח. "אתה חושב? רוב היצורים ביער מפחדים מהקורים שלי. הם בורחים ממני." הוא נאנח. "זה קצת בודד להיות אמן שאף אחד לא רוצה לראות את עבודתו."</p>
                </div>
                <img src="https://placehold.co/700x400/81c784/1b5e20?text=%D7%A8%D7%A7%D7%A9+%D7%95%D7%96%D7%95%D7%94%D7%A8+%D7%9E%D7%A9%D7%95%D7%97%D7%97%D7%99%D7%9D" alt="רקש העכביש וזוהר הגחלילית מדברים על קור העכביש" class="illustration">
                 <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>זוהר הרגיש קצת עצוב בשביל העכביש. "אני לא פוחד," הוא אמר, והתכוון לזה. רקש חייך בעדינות ושחרר את רגלו של זוהר. "אתה גחלילית אמיצה," אמר. "אבל למה אתה לבד בחושך? גחליליות לא אמורות לאהוב את החושך?" "אני לא," הודה זוהר במבוכה. "אני מפחד ממנו."</p>
                </div>
            </article>

            <article class="page content-page">
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא כותרת פרק"><i class="fas fa-volume-up"></i></button>
                    <h3>פרק 4: אור בתוך הסערה</h3>
                </div>
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>בדיוק כשהם סיימו לדבר, רוח חזקה החלה לנשוב. עלים התעופפו לכל עבר וענפים התכופפו. "הו לא, סערה מגיעה!" קרא רקש בדאגה. "היא עלולה לקרוע את הבית שלי!" הרוח התחזקה, ואחד החוטים המרכזיים של הקור נקרע! כל הרשת החלה לרעוד בעוצמה.</p>
                </div>
                <img src="https://placehold.co/700x450/263238/ffeb3b?text=%D7%96%D7%95%D7%94%D7%A8+%D7%9E%D7%90%D7%99%D7%A8+%D7%91%D7%A2%D7%95%D7%A6%D7%9E%D7%94+%D7%91%D7%A1%D7%A2%D7%A8%D7%94" alt="זוהר מאיר כמו שמש קטנה כדי לעזור לרקש בסערה" class="illustration">
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>"אני לא רואה כלום!" צעק רקש וניסה לאחוז בחוטים הרופפים. ברגע הזה, זוהר שכח מהפחד שלו. הוא ראה את חברו החדש בצרה. הוא התמקד, נשם עמוק, והאיר את האור שלו חזק יותר משהאיר אי פעם בחייו! הוא הפך לכדור אור קטן ובוהק. "אני אאיר לך את הדרך, רקש!" הוא צעק מעל רעש הרוח.</p>
                </div>
                 <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>האור הבהיר של זוהר האיר את כל הקור. עכשיו רקש יכול היה לראות בדיוק לאן לרוץ ואיזה חוט לחבר. בזריזות מדהימה, הוא טווה חוטים חדשים, חיזק את הקשרים, וקשר את כל הקור לענף חזק ויציב יותר. כשהרוח נרגעה, הקור עמד איתן וחזק, מבריק באורו של זוהר.</p>
                </div>
            </article>

            <article class="page content-page">
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא כותרת פרק"><i class="fas fa-volume-up"></i></button>
                    <h3>פרק 5: שני חברים, אור אחד</h3>
                </div>
                <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>רקש נשם לרווחה. הוא הסתכל על זוהר בהערצה. "הצלת את הבית שלי," אמר בהתרגשות. "האור הקטן שלך היה חזק יותר מכל הסערה." זוהר חייך. הוא הביט סביבו בחושך, שכבר לא נראה כל כך מפחיד. "והאומץ שלך הראה לי איך להשתמש בו," ענה. הוא הבין שהאור שלו לא היה קטן כשהיה לו חבר לחלוק אותו איתו.</p>
                </div>
                 <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>"בוא," אמר רקש, "בתור תודה, אני אראה לך את הדרך הקצרה ביותר חזרה למשפחה שלך. אני מכיר כל שביל ביער הזה." רקש הוביל את הדרך על הקרקע, וזוהר ריחף מעליו, מאיר להם את השביל כמו פנס פרטי. במהרה, הם ראו מרחוק נקודות אור מרקדות. משפחתו של זוהר!</p>
                </div>
                 <div class="text-block">
                    <button class="play-audio-btn" aria-label="הקרא פסקה"><i class="fas fa-volume-up"></i></button>
                    <p>מאותו הלילה, ריקוד האורות של הגחליליות השתנה. הן רקדו מסביב לקורים המרהיבים של רקש, והאור שלהן הפך את יצירותיו למופע מרהיב. וזוהר? הוא כבר לא פחד מהחושך, כי הוא ידע שגם האור הקטן ביותר יכול להאיר את הדרך, ושבלב היער החשוך, הוא מצא את החבר הכי לא צפוי והכי טוב שיכל לבקש.</p>
                </div>
                <img src="https://placehold.co/700x400/ffb74d/d84315?text=%D7%9B%D7%9C+%D7%94%D7%97%D7%91%D7%A8%D7%99%D7%9D+%D7%99%D7%97%D7%93+%D7%95%D7%9E%D7%90%D7%95%D7%A9%D7%A8%D7%99%D7%9D" alt="כל הגחליליות רוקדות סביב הקורים של רקש העכביש המאושר" class="illustration">
            </article>

            <div class="the-end">
                ~ הסוף ~
            </div>
        </main>
        
        <div id="toast"></div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const audioButtons = document.querySelectorAll('.play-audio-btn');
            const shareButton = document.getElementById('share-btn');
            const toast = document.getElementById('toast');
            let currentlyPlayingButton = null;

            // --- Text-to-Speech Functionality ---
            const synth = window.speechSynthesis;

            // Function to stop any currently playing speech
            const stopSpeech = () => {
                if (synth.speaking) {
                    synth.cancel();
                }
                if(currentlyPlayingButton) {
                    currentlyPlayingButton.classList.remove('playing');
                    currentlyPlayingButton.innerHTML = '<i class="fas fa-volume-up"></i>';
                }
            };

            // Event listener for all audio buttons
            audioButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const textElement = button.parentElement.querySelector('h1, h2, h3, p');
                    if (!textElement) return;

                    const textToSpeak = textElement.textContent;

                    // If this button is already playing, stop it.
                    if (button.classList.contains('playing')) {
                        stopSpeech();
                        return;
                    }

                    // Stop any other speech before starting a new one
                    stopSpeech();

                    const utterance = new SpeechSynthesisUtterance(textToSpeak);
                    utterance.lang = 'he-IL'; // Crucial for Hebrew speech
                    utterance.rate = 0.9;
                    utterance.pitch = 1.1;

                    utterance.onstart = () => {
                        button.classList.add('playing');
                        button.innerHTML = '<i class="fas fa-stop-circle"></i>';
                        currentlyPlayingButton = button;
                    };

                    utterance.onend = () => {
                        button.classList.remove('playing');
                        button.innerHTML = '<i class="fas fa-volume-up"></i>';
                        currentlyPlayingButton = null;
                    };

                    synth.speak(utterance);
                });
            });

            // --- Share Functionality ---
            shareButton.addEventListener('click', async () => {
                const shareData = {
                    title: 'החבר הכי לא צפוי של זוהר',
                    text: 'קראו את ספר הילדים האינטראקטיבי המקסים הזה!',
                    url: window.location.href // This works if the file is on a server
                };

                // Use Web Share API if available
                if (navigator.share) {
                    try {
                        await navigator.share(shareData);
                        console.log('Book shared successfully');
                    } catch (err) {
                        console.error('Share failed:', err.message);
                    }
                } else {
                    // Fallback: Copy link to clipboard
                    try {
                        await navigator.clipboard.writeText(shareData.url);
                        showToast('הקישור לספר הועתק!');
                    } catch (err) {
                        console.error('Failed to copy: ', err);
                        showToast('שגיאה בהעתקת הקישור');
                    }
                }
            });
            
            // --- Toast Notification ---
            function showToast(message) {
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
        });
    </script>

</body>
</html>
