<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Wizbi Play — דמו חי: צור משחק בוואטסאפ ושחק מיד</title>
<meta name="description" content="דמו חי: שיחת וואטסאפ שמייצרת משחק מיידית, קישור שיתוף, וגלריית משחקים לרמיקס — הכל בעמוד אחד.">
<meta property="og:title" content="Wizbi Play — דמו חי" />
<meta property="og:description" content="צור משחק בוואטסאפ, קבל לינק מיד, ושחק — ויראלי ומהיר." />
<meta property="og:image" content="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='630'><rect width='100%' height='100%' fill='%2300c175'/><text x='50%' y='50%' font-size='64' fill='white' text-anchor='middle' dominant-baseline='middle'>Wizbi Play</text></svg>">
<meta name="theme-color" content="#0d1117">
<style>
  :root{
    --bg:#0d1117; --panel:#0f1520; --card:#161b22; --border:#212938;
    --text:#e6edf3; --muted:#9aa7b1; --accent:#00c175; --accent-2:#7df0c3;
    --wa-green:#25D366; --wa-dark:#075E54; --good:#35d07f; --bad:#ff6b6b;
    --shadow: 0 8px 30px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:linear-gradient(180deg,var(--bg),#0b0f15 40%, #0a0d12);
       color:var(--text);font-family:Heebo,system-ui,Arial}
  a{color:var(--accent-2);text-decoration:none}
  .wrap{max-width:1120px;margin:0 auto;padding:20px}
  .hero{display:grid;grid-template-columns:1.1fr 1fr;gap:18px;align-items:stretch}
  @media (max-width:980px){ .hero{grid-template-columns:1fr} }
  .title{display:flex;align-items:center;gap:12px;margin:8px 0 4px}
  .title h1{margin:0;font-size:clamp(22px,4.2vw,40px);letter-spacing:.2px}
  .subtitle{color:var(--muted);margin-bottom:14px}
  .pill{display:inline-flex;gap:8px;align-items:center;background:#0a121c;border:1px solid var(--border);padding:6px 10px;border-radius:999px;color:#9ed0b9;font-weight:700}
  .stack{display:flex;flex-direction:column;gap:12px}
  .card{background:linear-gradient(180deg,#0f1520,#0c121a);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}
  .pad{padding:14px}
  .cta-row{display:flex;flex-wrap:wrap;gap:8px}
  .btn{border:1px solid var(--border);background:var(--card);color:var(--text);padding:12px 16px;border-radius:12px;font-weight:800}
  .btn.prime{background:linear-gradient(180deg,var(--accent),#05a966);border-color:#038d58;color:#042e22}
  .btn.ghost{background:transparent;color:#bfe9d9}
  .note{color:var(--muted);font-size:14px}
  /* WhatsApp mock */
  .wa{display:flex;flex-direction:column;height:520px;background:linear-gradient(180deg,#111,#0b141a);border-radius:18px;border:1px solid var(--border);overflow:hidden}
  .wa-header{background:linear-gradient(180deg,var(--wa-dark),#094d46);color:#eafff8;padding:10px 12px;display:flex;align-items:center;gap:10px}
  .wa-dot{width:8px;height:8px;border-radius:99px;background:#46ffa6;box-shadow:0 0 10px #46ffa6}
  .wa-name{font-weight:800}
  .wa-body{flex:1;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><circle cx="7" cy="7" r="1" fill="%23212f3c" opacity=".3"/></svg>') ;padding:12px;overflow:auto}
  .wa-msg{max-width:78%;margin:8px 0;padding:10px 12px;border-radius:14px;line-height:1.35;border:1px solid rgba(255,255,255,.04);box-shadow:0 6px 20px rgba(0,0,0,.18)}
  .wa-in{background:#1a2330}
  .wa-out{background:#1b3d2e;border-color:rgba(0,193,117,.35);margin-inline-start:auto}
  .wa-meta{display:flex;gap:10px;align-items:center;color:#9ed0b9;font-size:12px;margin-top:2px}
  .wa-typing{display:inline-flex;gap:3px}
  .wa-typing i{width:6px;height:6px;background:#9ed0b9;border-radius:99px;opacity:.35;animation:b .9s infinite}
  .wa-typing i:nth-child(2){animation-delay:.15s}.wa-typing i:nth-child(3){animation-delay:.3s}
  @keyframes b{0%,80%,100%{transform:translateY(0);opacity:.3} 40%{transform:translateY(-3px);opacity:.9}}
  .wa-footer{display:flex;gap:8px;padding:10px;background:#0c1218;border-top:1px solid var(--border)}
  .wa-input{flex:1;background:#0a1016;border:1px solid var(--border);border-radius:999px;color:var(--text);padding:10px 14px}
  .wa-send{background:var(--wa-green);border:none;border-radius:12px;padding:8px 12px;font-weight:800;color:#043122}
  .link-chip{display:inline-flex;align-items:center;gap:8px;background:#0a1b16;border:1px dashed #1d5e49;color:#aef3da;padding:8px 10px;border-radius:12px;margin-top:6px;cursor:pointer}
  /* Game area */
  .live{display:grid;grid-template-columns:1.05fr .95fr;gap:16px}
  @media (max-width:980px){ .live{grid-template-columns:1fr} }
  .game-wrap{display:flex;flex-direction:column;gap:10px}
  .game-head{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--border)}
  .badge{background:#0a1510;color:#80f0c8;border:1px solid #174b3c;padding:6px 10px;border-radius:999px;font-weight:800}
  .mini{font-size:12px;color:var(--muted)}
  .panel{display:flex;gap:8px;flex-wrap:wrap}
  .btn.small{padding:8px 12px;border-radius:10px;font-weight:700}
  .game-stage{height:520px;border-top:1px solid var(--border);border-bottom:1px solid var(--border);background:radial-gradient(1100px 400px at 50% -20%,rgba(0,193,117,.16),transparent 55%), #091018}
  /* Gallery */
  .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
  @media (max-width:980px){ .gallery{grid-template-columns:1fr 1fr} }
  @media (max-width:560px){ .gallery{grid-template-columns:1fr} }
  .tile{display:flex;flex-direction:column;gap:8px;padding:12px;border-radius:14px;border:1px solid var(--border);background:linear-gradient(180deg,#0f1520,#0b1118)}
  .tile .cover{height:120px;border-radius:10px;background:#0e1721;display:flex;align-items:center;justify-content:center;font-size:40px}
  .tile h4{margin:0}
  .copy-toast{position:fixed;inset-inline:0;bottom:16px;margin:auto;max-width:320px;background:#0a1c15;border:1px solid #186a50;color:#aef3da;padding:10px 12px;border-radius:12px;text-align:center;opacity:0;transform:translateY(12px);transition:all .25s}
  .copy-toast.show{opacity:1;transform:translateY(0)}
  .footnote{color:#7e8b96;font-size:12px;text-align:center;margin-top:14px}
</style>
</head>
<body>
  <div class="wrap">
    <!-- HERO -->
    <div class="title">
      <span class="pill">🚀 דמו חי • וואטסאפ ⇒ לינק ⇒ משחק</span>
    </div>
    <h1 class="title"><span>Wizbi Play</span></h1>
    <div class="subtitle">בנו משחקים ואתרי־מיני בוואטסאפ, קבלו לינק מיידי, שחקו ושתפו—בלי קוד, בלי המתנה.</div>

    <div class="hero">
      <!-- WhatsApp simulation -->
      <div class="stack">
        <div class="card wa" id="wa">
          <div class="wa-header">
            <div class="wa-dot"></div>
            <div>
              <div class="wa-name">Wizbi • Game Builder</div>
              <div style="font-size:12px;opacity:.8">מחובר עכשיו</div>
            </div>
          </div>
          <div class="wa-body" id="waBody">
            <!-- messages injected by JS -->
          </div>
          <div class="wa-footer">
            <input class="wa-input" id="waInput" placeholder="כתוב/י: בנה משחק פירות ל-15 שניות…">
            <button class="wa-send" id="waSend">שליחה</button>
          </div>
        </div>

        <div class="card pad">
          <div class="cta-row">
            <button class="btn prime" id="ctaFast">⏱️ הרץ דמו מלא עכשיו</button>
            <button class="btn ghost" id="ctaRemix">✨ Remix — שפר/י את המשחק שבדמו</button>
          </div>
          <div class="note">המערכת האמיתית שומרת משחקים לפי מספר הטלפון/המייל, מאפשרת שיתוף תוצאה בלינק, ורמיקס בלחיצה.</div>
        </div>
      </div>

      <!-- Live Game -->
      <div class="stack">
        <div class="card">
          <div class="game-head">
            <div style="display:flex;align-items:center;gap:8px">
              <span class="badge" id="gameBadge">משחק חי</span>
              <span class="mini" id="gameMeta">פרי טפר • 15s • מובייל־פרסט</span>
            </div>
            <div class="panel">
              <button class="btn small" id="btnStart">▶️ התחל</button>
              <button class="btn small" id="btnShare">🔗 שתף תוצאה</button>
              <button class="btn small" id="btnCopyLink">📋 העתק קישור</button>
            </div>
          </div>
          <div class="game-stage" id="gameStage">
            <!-- The game canvas is injected here -->
          </div>
          <div class="pad" style="display:flex;justify-content:space-between;align-items:center">
            <div>ניקוד: <b id="score">0</b> • זמן: <b id="time">15</b>s</div>
            <div id="shareLinkBox" class="note" style="display:none;"></div>
          </div>
        </div>
        <div class="card pad">
          <div class="subtitle" style="margin:0 0 8px">איך זה עובד?</div>
          <ol style="margin:0 0 0 18px; padding:0 0 0 18px">
            <li>כותבים בוואטסאפ מה רוצים (משחק/אתר).</li>
            <li>מקבלים לינק מיידי—ללא בילד/המתנה.</li>
            <li>משחקים, משתפים תוצאה, ויוצרים Remix משלכם.</li>
          </ol>
        </div>
      </div>
    </div>

    <!-- Gallery -->
    <div class="stack" style="margin-top:18px">
      <div class="title"><h2 style="margin:0">🎮 קולקציית משחקים לדוגמה</h2></div>
      <div class="gallery" id="gallery"></div>
    </div>

    <div class="footnote">© Wizbi • דמו לשימוש הדגמתי. אין כאן איסוף נתונים אישי. המשחקים בדף זה פועלים ללא רשת.</div>
  </div>

  <div id="toast" class="copy-toast">הקישור הועתק</div>

<script>
/* ========= WhatsApp Chat Simulation ========= */
(function WhatsAppDemo(){
  const waBody = document.getElementById('waBody');
  const input = document.getElementById('waInput');
  const send = document.getElementById('waSend');

  const samplePrompt = "בנה משחק תפוס-פירות ל-15 שניות, מתאים למובייל, צבעים ירוק/כהה, ושתף תוצאה בלינק.";
  input.value = samplePrompt;

  const messages = [];
  function msg(text, side='in', extraHTML=null){
    const wrap = document.createElement('div');
    wrap.className = `wa-msg wa-${side}`;
    wrap.innerHTML = `<div>${text}</div>`;
    if(extraHTML){ wrap.appendChild(extraHTML); }
    waBody.appendChild(wrap);
    waBody.scrollTop = waBody.scrollHeight;
  }
  function typing(){
    const b = document.createElement('div');
    b.className = 'wa-msg wa-in';
    const meta = document.createElement('div');
    meta.className = 'wa-meta';
    meta.innerHTML = `<span class="wa-typing"><i></i><i></i><i></i></span><span>Wizbi כותב/ת…</span>`;
    b.appendChild(meta);
    waBody.appendChild(b); waBody.scrollTop = waBody.scrollHeight;
    return b;
  }

  function makeLinkChip(url){
    const chip = document.createElement('div');
    chip.className = 'link-chip';
    chip.innerHTML = `🔗 ${url}`;
    chip.addEventListener('click', ()=>{
      // גלילה למשחק למטה
      document.getElementById('btnStart').focus();
      window.scrollTo({ top: document.getElementById('btnStart').getBoundingClientRect().top + window.scrollY - 40, behavior:'smooth' });
    });
    return chip;
  }

  function simulateBuild(userText){
    msg(userText, 'out');
    const t = typing();
    setTimeout(()=>{
      t.remove();
      msg("מייצר משחק חד־עמודי מותאם מובייל…");
      const t2 = typing();
      setTimeout(()=>{
        t2.remove();
        const link = window.location.href.split('#')[0] + "#demo";
        const chip = makeLinkChip(link);
        msg("מוכן! זה הקישור שלך — לחץ/י כדי לשחק עכשיו:", 'in', chip);
        // הצג גם “מדריך קצר”
        msg("טיפ: בכל סוף משחק אפשר לשתף את התוצאה בלינק ולהעביר הלאה בקלות. רוצה Remix? לחצי על Remix בתחתית המשחק.", 'in');
      }, 1400);
    }, 900);
  }

  send.addEventListener('click', ()=> simulateBuild(input.value.trim() || samplePrompt));
  input.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); simulateBuild(input.value.trim() || samplePrompt); } });

  // הפעלה אוטומטית עדינה בדפדפנים ניידים
  setTimeout(()=> simulateBuild(samplePrompt), 600);
})();

/* ========= Tiny Game Engine (Self-contained) ========= */
const GamePresets = [
  {
    id:'fruits', name:'תפוס פירות', emoji:["🍎","🍌","🍒","🍇","🍉","🍓","🍍"],
    seconds:15, color:'#00c175', meta:'פירות • 15s', og:'Fruit Tapper'
  },
  {
    id:'stars', name:'תפוס כוכבים', emoji:["⭐","🌟","✨","💫"], seconds:12, color:'#ffd54f', meta:'כוכבים • 12s', og:'Star Catch'
  },
  {
    id:'ocean', name:'בועות ים', emoji:["🫧","💧","🔵","🟦"], seconds:18, color:'#5bd0ff', meta:'ים • 18s', og:'Aqua Pop'
  },
  {
    id:'soccer', name:'כדורי כדורגל', emoji:["⚽","🟢","⚽","⚽"], seconds:10, color:'#7fff7f', meta:'כדורגל • 10s', og:'Goal Tap'
  },
  {
    id:'spooky', name:'ספוקי', emoji:["🎃","👻","🕷️","🦇"], seconds:14, color:'#ff955a', meta:'ספוקי • 14s', og:'Spooky Tap'
  },
  {
    id:'emoji', name:'אמוג׳י ג׳אם', emoji:["😺","😎","🤖","🐸","🦄","🐼"], seconds:16, color:'#e879f9', meta:'אמוג׳י • 16s', og:'Emoji Jam'
  }
];

(function Gallery(){
  const g = document.getElementById('gallery');
  GamePresets.forEach(p=>{
    const el = document.createElement('div');
    el.className='tile';
    el.innerHTML = `
      <div class="cover" style="background:radial-gradient(700px 200px at 50% -30%, rgba(255,255,255,.06), transparent 60%), #0e1721">${p.emoji[0]} ${p.emoji[1]||""}</div>
      <h4>${p.name}</h4>
      <div class="note">${p.meta}</div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn small" data-load="${p.id}">▶️ טען דמו</button>
        <button class="btn small" data-remix="${p.id}">✨ Remix</button>
        <button class="btn small" data-share="${p.id}">🔗 שתף לינק</button>
      </div>
    `;
    g.appendChild(el);
  });

  g.addEventListener('click', (e)=>{
    const b = e.target.closest('button'); if(!b) return;
    const id = b.getAttribute('data-load')||b.getAttribute('data-remix')||b.getAttribute('data-share');
    const preset = GamePresets.find(x=> x.id===id); if(!preset) return;
    if(b.hasAttribute('data-load')) loadGame(preset);
    if(b.hasAttribute('data-remix')) doRemix(preset);
    if(b.hasAttribute('data-share')) copyLinkFor(preset);
  });
})();

/* ========= Game Runtime ========= */
let Current = GamePresets[0];
const stage = document.getElementById('gameStage');
const scoreEl = document.getElementById('score');
const timeEl = document.getElementById('time');
const badge = document.getElementById('gameBadge');
const meta = document.getElementById('gameMeta');
const btnStart = document.getElementById('btnStart');
const btnShare = document.getElementById('btnShare');
const btnCopyLink = document.getElementById('btnCopyLink');
const shareBox = document.getElementById('shareLinkBox');
const toast = document.getElementById('toast');

let running=false, score=0, t=0, timer=null, spawner=null;

function rand(min,max){ return Math.random()*(max-min)+min }

function clearStage(){ stage.innerHTML=''; }

function spawnOne(){
  const f = document.createElement('div');
  f.textContent = Current.emoji[(Math.random()*Current.emoji.length)|0];
  f.style.position='absolute';
  f.style.fontSize = rand(24,38)+'px';
  f.style.userSelect='none';
  const rect = stage.getBoundingClientRect();
  const x = rand(0, rect.width-48), y = rand(0, rect.height-48);
  f.style.left = x+'px'; f.style.top = y+'px';
  f.style.transition='transform .08s';
  f.addEventListener('pointerdown', ()=>{
    score++; scoreEl.textContent=score;
    f.style.transform='scale(.7) rotate(-7deg)';
    setTimeout(()=> f.remove(), 30);
  }, {passive:true});
  stage.appendChild(f);
  setTimeout(()=> f.remove(), 1400);
}

function tick(){
  t--; timeEl.textContent=t;
  if(t<=0){ endGame(); }
}

function startGame(){
  if(running) return;
  running=true; score=0; scoreEl.textContent='0';
  shareBox.style.display='none';
  clearStage();
  t = Current.seconds; timeEl.textContent=t;
  stage.style.background = `radial-gradient(1100px 400px at 50% -20%, ${hexToRGBA(Current.color, .18)}, transparent 55%), #091018`;
  timer = setInterval(tick, 1000);
  spawner = setInterval(spawnOne, 330);
}

function endGame(){
  running=false;
  clearInterval(timer); clearInterval(spawner);
  // הצג לינק שיתוף (פרמטרים ב-Query)
  const url = new URL(window.location.href);
  url.hash = 'demo';
  url.searchParams.set('game', Current.id);
  url.searchParams.set('score', String(score));
  url.searchParams.set('seed', String((Math.random()*1e6)|0));
  shareBox.innerHTML = `🔗 תוצאתך: <a href="${url.toString()}">${url.toString()}</a>`;
  shareBox.style.display='block';
  // קפיצה קלה כדי שיראו את התוצאה
  shareBox.scrollIntoView({behavior:'smooth',block:'center'});
}

function loadGame(preset){
  Current = preset;
  badge.textContent = 'משחק חי';
  meta.textContent = `${preset.name} • ${preset.seconds}s • מובייל־פרסט`;
  document.title = `Wizbi Play — ${preset.og}`;
  // אפקט זעיר לצבע
  badge.style.background = '#0a1510';
  stage.style.boxShadow = 'inset 0 0 0 rgba(0,0,0,0)';
  setTimeout(()=>{ stage.style.boxShadow = 'inset 0 0 220px rgba(0,0,0,.25)'; }, 0);
  // איפוס ריצה
  if(running){ endGame(); }
}

function doRemix(preset){
  // סימולציית רמיקס: נטען את הפריסט ונקפיץ הודעה בוואטסאפ דמה
  loadGame(preset);
  toastMsg(`Remix מוכן: ${preset.name}`);
}

function copyLinkFor(preset){
  const url = new URL(window.location.href);
  url.hash='demo';
  url.searchParams.set('game', preset.id);
  url.searchParams.delete('score');
  navigator.clipboard.writeText(url.toString()).then(()=> toastMsg('קישור הועתק'));
}

function toastMsg(t){
  toast.textContent = t; toast.classList.add('show');
  setTimeout(()=> toast.classList.remove('show'), 1300);
}

function hexToRGBA(hex, alpha){
  const h = hex.replace('#',''); const bigint = parseInt(h,16);
  const r = (bigint>>16)&255, g=(bigint>>8)&255, b=bigint&255;
  return `rgba(${r},${g},${b},${alpha})`;
}

btnStart.addEventListener('click', startGame);
btnShare.addEventListener('click', endGame);
btnCopyLink.addEventListener('click', ()=>{
  const url = shareBox.textContent && shareBox.querySelector('a') ? shareBox.querySelector('a').href
            : (new URL(window.location.href)).toString();
  navigator.clipboard.writeText(url).then(()=> toastMsg('הקישור הועתק'));
});

// טעינה ראשונית + תמיכה בפרמטרים (score/game)
(function bootstrap(){
  loadGame(Current);
  const p = new URLSearchParams(window.location.search);
  const g = p.get('game'); const s = p.get('score');
  if(g){
    const found = GamePresets.find(x=> x.id===g);
    if(found) loadGame(found);
  }
  if(s){ // מצב "תצוגת תוצאה"
    const sc = Number(s)||0;
    score = sc; scoreEl.textContent=String(sc); timeEl.textContent='0';
    const url = new URL(window.location.href); url.hash='demo';
    document.getElementById('shareLinkBox').innerHTML = `🔗 תוצאה משותפת: <a href="${url.toString()}">${url.toString()}</a>`;
    document.getElementById('shareLinkBox').style.display='block';
  }
})();

/* ========= CTA shortcuts ========= */
document.getElementById('ctaFast').addEventListener('click', ()=>{
  window.location.hash='demo';
  document.getElementById('btnStart').focus();
  window.scrollTo({ top: document.getElementById('btnStart').getBoundingClientRect().top + window.scrollY - 40, behavior:'smooth' });
  startGame();
});
document.getElementById('ctaRemix').addEventListener('click', ()=> doRemix(GamePresets[1]));
</script>
</body>
</html>