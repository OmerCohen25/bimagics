<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>אבינועם נעים - שיווק והפצת מוצרי צריכה</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- General Styling & Variables --- */
        :root {
            --primary-color: #005f73; /* Deep Teal */
            --secondary-color: #0a9396; /* Bright Teal */
            --accent-color: #ee9b00; /* Amber/Gold */
            --background-color: #f8f9fa;
            --text-color: #212529;
            --header-bg: #ffffff;
            --footer-bg: #001219;
            --card-bg: #ffffff;
            --button-hover: #003e4d;
            --border-color: #dee2e6;
        }

        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(37, 211, 102, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }

        /* --- Base Styles --- */
        body {
            font-family: 'Assistant', sans-serif;
            margin: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.7;
            font-size: 16px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
        }

        h1, h2, h3 {
            color: var(--primary-color);
            font-weight: 700;
        }

        /* --- Header --- */
        .site-header {
            background-color: var(--header-bg);
            padding: 10px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--primary-color);
        }

        .main-nav {
            display: none; /* Hidden on mobile */
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .whatsapp-btn-header {
            background-color: #25D366;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.2s;
        }
        .whatsapp-btn-header:hover {
            transform: scale(1.05);
        }
        
        #admin-btn {
            background-color: var(--accent-color);
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            border: none;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        #admin-btn:hover {
            background-color: #ca8200;
        }
        body.edit-mode #admin-btn {
            background-color: #28a745;
        }
        body.edit-mode #admin-btn:hover {
            background-color: #218838;
        }

        /* --- Hero Section --- */
        .hero {
            background: linear-gradient(rgba(0, 30, 36, 0.7), rgba(0, 30, 36, 0.7)), url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQgdlI1uDit2mT_qctQw6spjHiyPmDK3csI9w&s') no-repeat center center/cover;
            color: white;
            text-align: center;
            padding: 80px 20px;
            animation: fadeIn 1s ease-out;
        }
        .hero h1 {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 15px;
            color: white;
        }
        .hero p {
            font-size: 1.2em;
            max-width: 700px;
            margin: 0 auto;
            font-weight: 300;
        }

        /* --- Filters & Search Section --- */
        .filters-section {
            padding: 30px 0;
            background-color: #e9ecef;
            position: sticky;
            top: 70px; /* Height of header */
            z-index: 999;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .search-container {
            max-width: 700px;
            margin: 0 auto 25px auto;
        }
        #search-input {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            box-sizing: border-box;
            transition: box-shadow 0.3s;
        }
        #search-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(10, 147, 150, 0.3);
        }
        .category-filters-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }
        .category-btn {
            padding: 8px 18px;
            font-size: 1em;
            font-weight: 600;
            border: 1px solid transparent;
            border-radius: 20px;
            cursor: pointer;
            background-color: #fff;
            color: var(--primary-color);
            transition: all 0.3s;
        }
        .category-btn:hover {
            background-color: var(--secondary-color);
            color: white;
        }
        .category-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* --- Product Catalog --- */
        #catalog {
            padding: 40px 0;
        }
        #catalog-title {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.2em;
        }
        #product-grid {
            display: grid;
            grid-template-columns: 1fr; /* Mobile first: 1 column */
            gap: 25px;
            animation: fadeIn 1s ease-out 0.5s;
            animation-fill-mode: both;
        }
        .product-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            animation: fadeIn 0.5s ease-out forwards;
        }
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        }
        .product-image-container {
            width: 100%;
            height: 250px;
            background-color: #fff;
            padding: 10px;
            box-sizing: border-box;
        }
        .product-card img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        .product-info {
            padding: 20px;
            flex-grow: 1;
        }
        .product-info h3 {
            margin: 0 0 10px 0;
            font-size: 1.3em;
            font-weight: 600;
        }
        .product-info .sku {
            font-weight: 700;
            color: var(--secondary-color);
            display: block;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        .product-info p {
            font-size: 1em;
            flex-grow: 1;
            font-weight: 400;
        }

        /* --- Edit Mode --- */
        .edit-field {
            padding: 5px;
            border: 2px dashed transparent;
            width: calc(100% - 14px);
            margin-bottom: 5px;
            transition: all 0.3s;
        }
        body.edit-mode .edit-field {
            border-color: var(--accent-color);
            background-color: #fff8e1;
        }
        .edit-field:focus {
            outline: none;
            border-style: solid;
            background-color: white;
        }
        .edit-url-field {
            display: none;
            width: calc(100% - 12px);
            padding: 5px;
            border: 1px dashed var(--primary-color);
            font-size: 0.8em;
            margin-top: 10px;
        }
        body.edit-mode .edit-url-field {
            display: block;
        }

        /* --- Info Section (About/Contact) --- */
        .info-section {
            background-color: var(--card-bg);
            padding: 50px 0;
            text-align: center;
        }
        .info-section p {
            max-width: 800px;
            margin: 15px auto;
            font-size: 1.1em;
        }

        /* --- Footer --- */
        .site-footer {
            background-color: var(--footer-bg);
            color: #adb5bd;
            text-align: center;
            padding: 30px 0;
            margin-top: 40px;
        }

        /* --- Floating WhatsApp Button --- */
        .whatsapp-float-btn {
            position: fixed;
            width: 60px;
            height: 60px;
            bottom: 20px;
            left: 20px;
            background-color: #25D366;
            color: #FFF;
            border-radius: 50px;
            text-align: center;
            font-size: 30px;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            animation: pulse 2s infinite;
        }

        /* --- Modal --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 30% auto;
            padding: 30px;
            border: 1px solid #888;
            width: 90%;
            max-width: 400px;
            text-align: center;
            border-radius: 12px;
            animation: fadeIn 0.5s;
        }
        .modal-content h2 { margin-top: 0; }
        .modal-content input {
            width: 100%;
            padding: 12px;
            margin: 10px 0 20px 0;
            box-sizing: border-box;
            border-radius: 5px;
            border: 1px solid var(--border-color);
        }
        .modal-buttons button {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
        }
        #confirm-login { background-color: var(--primary-color); color: white; }
        #cancel-login { background-color: #ccc; }

        /* --- SVG Icons --- */
        .svg-icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }
        
        /* --- Desktop & Tablet Styles --- */
        @media (min-width: 768px) {
            body { font-size: 18px; }
            .container { padding: 0 30px; }
            .main-nav { display: block; }
            .main-nav a {
                color: var(--text-color);
                text-decoration: none;
                margin: 0 15px;
                font-weight: 600;
                position: relative;
                transition: color 0.3s;
            }
            .main-nav a:hover { color: var(--secondary-color); }
            .main-nav a::after {
                content: '';
                position: absolute;
                width: 0;
                height: 2px;
                display: block;
                margin-top: 5px;
                right: 0;
                background: var(--secondary-color);
                transition: width 0.3s ease;
            }
            .main-nav a:hover::after { width: 100%; }
            #product-grid { grid-template-columns: repeat(2, 1fr); }
            .hero h1 { font-size: 3.5em; }
            .hero p { font-size: 1.4em; }
        }
        
        @media (min-width: 1024px) {
            #product-grid { grid-template-columns: repeat(3, 1fr); }
        }
        
        @media (min-width: 1300px) {
            #product-grid { grid-template-columns: repeat(4, 1fr); }
        }
    </style>
</head>
<body>

    <header class="site-header">
        <div class="container header-container">
            <div class="logo">אבינועם נעים</div>
            <nav class="main-nav">
                <a href="#home">ראשי</a>
                <a href="#catalog">קטלוג</a>
                <a href="#about">אודות</a>
                <a href="#contact">צור קשר</a>
            </nav>
            <div class="header-actions">
                <a href="https://wa.me/972527346457?text=שלום%20אבינועם,%20אני%20מעוניין%20בפרטים%20נוספים%20על%20המוצרים." class="whatsapp-btn-header" target="_blank">
                    <svg class="svg-icon" viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.31 20.62C8.75 21.39 10.36 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.91C21.95 9.27 20.94 6.8 19.19 4.99C17.44 3.19 14.93 2 12.04 2M12.04 3.67C16.56 3.67 20.28 7.38 20.28 11.91C20.28 16.44 16.56 20.15 12.04 20.15C10.56 20.15 9.14 19.78 7.9 19.09L7.54 18.88L4.42 19.7L5.32 16.65L5.08 16.29C4.32 15 3.8 13.47 3.8 11.91C3.8 7.38 7.52 3.67 12.04 3.67M17.02 14.6C16.76 14.92 15.76 15.46 15.41 15.58C15.06 15.71 14.24 15.91 12.91 15.37C11.31 14.72 10.06 13.2 9.94 13.04C9.82 12.89 8.65 11.53 8.65 10.3C8.65 9.07 9.42 8.35 9.64 8.13C9.86 7.91 10.15 7.81 10.37 7.81C10.5 7.81 10.62 7.81 10.73 7.82C10.9 7.82 11.08 7.85 11.23 8.3C11.39 8.74 11.94 10.24 12 10.37C12.07 10.5 12.1 10.65 12.01 10.8C11.92 10.95 11.89 11.01 11.77 11.14C11.66 11.27 11.53 11.4 11.43 11.5C11.33 11.6 11.19 11.74 11.35 12.04C11.51 12.33 12.07 13.12 12.82 13.77C13.78 14.59 14.59 14.77 14.81 14.87C15.03 14.97 15.4 14.95 15.62 14.72C15.84 14.5 16.22 13.97 16.42 13.68C16.62 13.38 16.82 13.32 17.06 13.41C17.31 13.5 18.41 14.04 18.66 14.16C18.91 14.28 19.06 14.35 19.11 14.44C19.16 14.53 18.98 14.8 18.89 14.92C18.8 15.04 17.91 15.91 17.02 14.6Z" /></svg>
                    <span>דברו איתנו</span>
                </a>
                <button id="admin-btn">ניהול</button>
            </div>
        </div>
    </header>

    <main>
        <section id="home" class="hero">
            <h1>פתרונות צריכה מתקדמים לעסק שלך</h1>
            <p>שיווק והפצה של מגוון רחב של מוצרי צריכה איכותיים לספקים, מסעדות, חנויות ומוסדות.</p>
        </section>

        <section class="filters-section">
            <div class="container">
                <div class="search-container">
                    <input type="search" id="search-input" placeholder="חפשו שם מוצר, מק״ט או תיאור...">
                </div>
                <div id="category-filters" class="category-filters-container">
                    </div>
            </div>
        </section>

        <section id="catalog" class="container">
            <h2 id="catalog-title">קטלוג המוצרים</h2>
            <div id="product-grid">
                </div>
        </section>
        
        <section id="about" class="info-section">
            <div class="container">
                <h2>שירות, איכות ומחיר ללא תחרות</h2>
                <p>אנו באבינועם נעים מתמחים מזה שנים רבות באספקת מוצרי צריכה מעולים לשוק המוסדי והעסקי. אנו מבינים את הצרכים הייחודיים שלכם - מסעדנים, קמעונאים ומנהלי מוסדות - ומחויבים לספק לכם מוצרים באיכות הגבוהה ביותר, שירות אמין ומהיר, ומחירים הוגנים שישפרו את השורה התחתונה שלכם. אנו כאן כדי להיות השותפים שלכם להצלחה.</p>
            </div>
        </section>
        
        <section id="contact" class="info-section" style="background-color: var(--background-color);">
            <div class="container">
                <h2>מוכנים להתחיל?</h2>
                <p>צרו קשר עוד היום לקבלת הצעת מחיר מותאמת אישית ולשמוע איך נוכל לעזור לעסק שלכם לצמוח.</p>
                <p><strong>אבינועם נעים | טלפון/ווצאפ:</strong> 052-734-6457</p>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 כל הזכויות שמורות | אבינועם נעים - שיווק והפצת מוצרי צריכה</p>
        </div>
    </footer>
    
    <a href="https://wa.me/972527346457?text=שלום%20אבינועם,%20אני%20מעוניין%20בפרטים%20נוספים%20על%20המוצרים." class="whatsapp-float-btn" target="_blank">
       <svg class="svg-icon" viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.31 20.62C8.75 21.39 10.36 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.91C21.95 9.27 20.94 6.8 19.19 4.99C17.44 3.19 14.93 2 12.04 2M12.04 3.67C16.56 3.67 20.28 7.38 20.28 11.91C20.28 16.44 16.56 20.15 12.04 20.15C10.56 20.15 9.14 19.78 7.9 19.09L7.54 18.88L4.42 19.7L5.32 16.65L5.08 16.29C4.32 15 3.8 13.47 3.8 11.91C3.8 7.38 7.52 3.67 12.04 3.67M17.02 14.6C16.76 14.92 15.76 15.46 15.41 15.58C15.06 15.71 14.24 15.91 12.91 15.37C11.31 14.72 10.06 13.2 9.94 13.04C9.82 12.89 8.65 11.53 8.65 10.3C8.65 9.07 9.42 8.35 9.64 8.13C9.86 7.91 10.15 7.81 10.37 7.81C10.5 7.81 10.62 7.81 10.73 7.82C10.9 7.82 11.08 7.85 11.23 8.3C11.39 8.74 11.94 10.24 12 10.37C12.07 10.5 12.1 10.65 12.01 10.8C11.92 10.95 11.89 11.01 11.77 11.14C11.66 11.27 11.53 11.4 11.43 11.5C11.33 11.6 11.19 11.74 11.35 12.04C11.51 12.33 12.07 13.12 12.82 13.77C13.78 14.59 14.59 14.77 14.81 14.87C15.03 14.97 15.4 14.95 15.62 14.72C15.84 14.5 16.22 13.97 16.42 13.68C16.62 13.38 16.82 13.32 17.06 13.41C17.31 13.5 18.41 14.04 18.66 14.16C18.91 14.28 19.06 14.35 19.11 14.44C19.16 14.53 18.98 14.8 18.89 14.92C18.8 15.04 17.91 15.91 17.02 14.6Z" /></svg>
    </a>

    <div id="login-modal" class="modal">
        <div class="modal-content">
            <h2>כניסת מנהל</h2>
            <p>הזן סיסמה כדי לעבור למצב עריכה.</p>
            <input type="password" id="password-input" placeholder="סיסמה">
            <div id="error-message" style="color:red; margin-bottom:10px; display:none;">סיסמה שגויה! נסה שוב.</div>
            <div class="modal-buttons">
                <button id="cancel-login">ביטול</button>
                <button id="confirm-login">התחבר</button>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- State and Data ---
    let products = [];
    let isEditMode = false;

    // --- DOM Elements ---
    const productGrid = document.getElementById('product-grid');
    const searchInput = document.getElementById('search-input');
    const categoryFiltersContainer = document.getElementById('category-filters');
    const adminBtn = document.getElementById('admin-btn');
    const loginModal = document.getElementById('login-modal');
    const passwordInput = document.getElementById('password-input');
    const confirmLoginBtn = document.getElementById('confirm-login');
    const cancelLoginBtn = document.getElementById('cancel-login');
    const errorMessage = document.getElementById('error-message');

    /**
     * Loads products from localStorage if available, otherwise fetches from products.json
     * This is an async function because fetch is asynchronous.
     */
    async function loadProducts() {
        const storedProducts = localStorage.getItem('avinoamNaimProducts');
        if (storedProducts) {
            products = JSON.parse(storedProducts);
            renderCategories();
            renderProducts(products);
        } else {
            try {
                const response = await fetch('products.json'); // Fetch the external JSON file
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                products = data;
                renderCategories();
                renderProducts(products);
            } catch (error) {
                console.error("Could not load products:", error);
                productGrid.innerHTML = '<p style="text-align:center; grid-column: 1 / -1; color: red;">שגיאה בטעינת המוצרים. ודא שהקובץ products.json נמצא באותה התיקייה.</p>';
            }
        }
    }

    function renderCategories() {
        const categories = ['הכל', ...new Set(products.map(p => p.category))];
        categoryFiltersContainer.innerHTML = '';
        categories.forEach(category => {
            const btn = document.createElement('button');
            btn.className = 'category-btn';
            btn.textContent = category;
            if (category === 'הכל') {
                btn.classList.add('active');
            }
            btn.addEventListener('click', () => {
                // Update active button style
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                // Filter and render products
                const productsToRender = category === 'הכל' 
                    ? products 
                    : products.filter(p => p.category === category);
                renderProducts(productsToRender);
            });
            categoryFiltersContainer.appendChild(btn);
        });
    }

    function renderProducts(productsToRender) {
        productGrid.innerHTML = '';
        if (productsToRender.length === 0) {
            productGrid.innerHTML = '<p style="text-align:center; grid-column: 1 / -1;">לא נמצאו מוצרים התואמים את החיפוש.</p>';
            return;
        }

        productsToRender.forEach(product => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.dataset.id = product.id;
            
            card.innerHTML = `
                <div class="product-image-container">
                    <img src="${product.imageUrl}" alt="${product.name}" loading="lazy">
                </div>
                <div class="product-info">
                    <h3 class="edit-field" data-field="name" contenteditable="${isEditMode}">${product.name}</h3>
                    <span class="sku edit-field" data-field="sku" contenteditable="${isEditMode}">מק״ט: ${product.sku}</span>
                    <p class="edit-field" data-field="description" contenteditable="${isEditMode}">${product.description}</p>
                    <input type="text" class="edit-url-field" value="${product.imageUrl}" data-field="imageUrl" placeholder="הדבק קישור חדש לתמונה כאן">
                </div>
            `;
            productGrid.appendChild(card);
        });
    }

    function handleSearch() {
        const searchTerm = searchInput.value.toLowerCase();
        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
        document.querySelector('.category-btn').classList.add('active'); // Set 'All' to active
        const filteredProducts = products.filter(p => 
            p.name.toLowerCase().includes(searchTerm) ||
            p.sku.toLowerCase().includes(searchTerm) ||
            p.description.toLowerCase().includes(searchTerm)
        );
        renderProducts(filteredProducts);
    }

    function toggleAdminMode() {
        if (isEditMode) {
            saveChanges();
            isEditMode = false;
            document.body.classList.remove('edit-mode');
            adminBtn.textContent = 'ניהול';
            alert('השינויים נשמרו בהצלחה בדפדפן!');
            renderProducts(products); // Re-render to disable contenteditable
        } else {
            loginModal.style.display = 'block';
            passwordInput.focus();
        }
    }

    function login() {
        if (passwordInput.value === '12345') { // You can change the password here
            isEditMode = true;
            document.body.classList.add('edit-mode');
            adminBtn.textContent = 'שמור וצא';
            loginModal.style.display = 'none';
            passwordInput.value = '';
            errorMessage.style.display = 'none';
            
            // Re-render the currently displayed products in edit mode
            const activeCategoryBtn = document.querySelector('.category-btn.active');
            const category = activeCategoryBtn ? activeCategoryBtn.textContent : 'הכל';
            const searchTerm = searchInput.value.toLowerCase();

            let productsToRender = products;

            if (category !== 'הכל') {
                productsToRender = productsToRender.filter(p => p.category === category);
            }
            if(searchTerm) {
                 productsToRender = productsToRender.filter(p => 
                    p.name.toLowerCase().includes(searchTerm) ||
                    p.sku.toLowerCase().includes(searchTerm) ||
                    p.description.toLowerCase().includes(searchTerm)
                );
            }
            
            renderProducts(productsToRender);
        } else {
            errorMessage.style.display = 'block';
        }
    }
    
    function saveChanges() {
        const cards = document.querySelectorAll('.product-card');
        let dataChanged = false;
        cards.forEach(card => {
            const productId = parseInt(card.dataset.id);
            const productIndex = products.findIndex(p => p.id === productId);

            if (productIndex > -1) {
                const updatedProduct = { ...products[productIndex] };
                updatedProduct.name = card.querySelector('[data-field="name"]').textContent;
                updatedProduct.sku = card.querySelector('[data-field="sku"]').textContent.replace('מק״ט: ', '');
                updatedProduct.description = card.querySelector('[data-field="description"]').textContent;
                updatedProduct.imageUrl = card.querySelector('[data-field="imageUrl"]').value;
                
                // Compare to see if anything actually changed before saving
                if (JSON.stringify(products[productIndex]) !== JSON.stringify(updatedProduct)) {
                    products[productIndex] = updatedProduct;
                    dataChanged = true;
                }
            }
        });

        if(dataChanged) {
            localStorage.setItem('avinoamNaimProducts', JSON.stringify(products));
        }
    }
    
    // --- Smooth Scrolling for Nav Links ---
    document.querySelectorAll('.main-nav a').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetElement = document.querySelector(this.getAttribute('href'));
            if(targetElement) {
                const headerOffset = 80; // height of header
                const elementPosition = targetElement.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: "smooth"
                });
            }
        });
    });

    // --- Event Listeners ---
    searchInput.addEventListener('input', handleSearch);
    adminBtn.addEventListener('click', toggleAdminMode);
    
    // Modal events
    cancelLoginBtn.addEventListener('click', () => {
        loginModal.style.display = 'none';
        passwordInput.value = '';
        errorMessage.style.display = 'none';
    });
    
    confirmLoginBtn.addEventListener('click', login);
    passwordInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') login(); });
    window.addEventListener('click', (e) => { if (e.target == loginModal) loginModal.style.display = "none"; });

    // --- Initial Load ---
    loadProducts();
});
</script>

</body>
</html>
