<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wizbi | ×× ×œ×™×¡×˜ AI ××™×©×™ ×œ×¢×¡×§ ×©×œ×š, ×™×©×™×¨×•×ª ×‘-WhatsApp</title>

    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --brand-green: #00C175;
            --brand-dark: #0d1117;
            --brand-gray: #161b22;
            --accent: #FFD54F;
            --text-primary: #F2F5F7;
            --text-secondary: #9BA3AE;
            --radius: 16px;
            --section-gap: 100px;
            --border-color: #30363d;
        }

        * {box-sizing:border-box;margin:0;padding:0;font-family:'Heebo',sans-serif;}
        html { scroll-behavior: smooth; }
        body{background:var(--brand-dark);color:var(--text-primary);line-height:1.6; overflow-x: hidden;}

        a{color:var(--accent);text-decoration:none; font-weight: 700;} a:hover{text-decoration:underline;}

        header{display:flex;align-items:center;justify-content:center;padding:20px 4%;background:rgba(13, 17, 23, 0.85); backdrop-filter: blur(10px); position:sticky;top:0;z-index:100;border-bottom: 1px solid var(--border-color);}
        .header-logo {font-size: 1.8rem;font-weight: 900;color: var(--text-primary);text-decoration: none;}
        .header-logo span { color: var(--accent); }

        .hero{padding:120px 4% 80px;text-align:center;}
        .hero h1{font-size:clamp(2.5rem,7vw,4.2rem);font-weight:900;margin-bottom:20px; line-height: 1.15; color: #fff;}
        .hero h1 span { color: var(--brand-green); }
        .hero p{font-size:clamp(1.1rem,3vw,1.6rem);color:#E1E7EC;margin-bottom:32px;max-width: 800px; margin-left: auto; margin-right: auto;}
        
        .main-cta-btn{
            background:var(--accent); border:none; padding: 18px 48px; font-size:1.3rem; font-weight:900;
            border-radius:50px; cursor:pointer; color:#000; transition: transform 0.2s, box-shadow 0.2s;
            display: inline-block; box-shadow: 0 4px 20px rgba(255, 213, 79, 0.2);
        }
        .main-cta-btn:hover{transform: scale(1.05); box-shadow: 0 6px 25px rgba(255, 213, 79, 0.3);}
        .cta-subtitle { margin-top: 12px; color: var(--text-secondary); }

        .secondary-cta-container { margin-top: 40px; display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 16px;}
        .secondary-cta-container a {
            color: var(--text-primary); text-decoration: none; background: var(--brand-gray); padding: 12px 24px;
            border-radius: 12px; border: 1px solid var(--border-color); transition: all 0.2s ease;
        }
        .secondary-cta-container a:hover {
            background: var(--brand-green); color: #000; border-color: var(--brand-green); transform: translateY(-2px);
        }
        .secondary-cta-container a .material-symbols-outlined { font-size: 1.2em; vertical-align: -3px; margin-left: 6px; }

        .section-title {text-align:center;font-size:clamp(2rem, 5vw, 2.8rem);font-weight:900;margin-top:var(--section-gap); margin-bottom: 48px;}
        .section-subtitle { text-align: center; color: var(--text-secondary); font-size: 1.2rem; max-width: 600px; margin: -32px auto 48px; }

        /* --- INTERACTIVE SIMULATOR --- */
        .phone-wrapper{margin:40px auto;width:340px;height:700px;background:#111;border:14px solid #333;border-radius:48px;position:relative; box-shadow: 0 20px 40px rgba(0,0,0,0.4); padding: 12px;}
        .phone-inner { width: 100%; height: 100%; border-radius: 34px; background-color: var(--brand-dark); display: flex; flex-direction: column; overflow: hidden; position: relative;}
        
        .demo-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--brand-dark); color: var(--text-primary);
            transition: opacity 0.4s ease, transform 0.4s ease;
            opacity: 0; transform: scale(1.05); pointer-events: none;
            display: flex; flex-direction: column;
        }
        .demo-screen.active { opacity: 1; transform: scale(1); pointer-events: auto; }

        /* --- Login Screen --- */
        #login-screen { justify-content: center; align-items: center; gap: 24px; }
        #login-screen h3 { font-size: 1.8rem; }
        .google-btn {
            display: flex; align-items: center; gap: 12px; background: #fff; color: #333;
            padding: 12px 24px; border-radius: 8px; font-weight: 700; cursor: pointer;
        }
        .google-btn img { height: 24px; }

        /* --- API Key Screen --- */
        #api-key-screen { justify-content: center; align-items: center; gap: 16px; padding: 20px; text-align: center; }
        #api-key-screen .material-symbols-outlined { font-size: 48px; color: var(--brand-green); }
        #api-key-screen p { color: var(--text-secondary); font-size: 0.9rem; }
        .api-input {
            font-family: monospace; background: var(--brand-gray); border: 1px solid var(--border-color);
            padding: 12px; border-radius: 8px; color: var(--text-secondary); width: 100%; text-align: center;
        }
        .connect-btn {
            background: var(--brand-green); color: #000; font-weight: 700; padding: 12px 32px;
            border: none; border-radius: 8px; cursor: pointer; width: 100%;
        }

        /* --- Loading Screen --- */
        @keyframes spin { to { transform: rotate(360deg); } }
        .loader { width: 48px; height: 48px; border: 4px solid var(--border-gray); border-top-color: var(--brand-green); border-radius: 50%; animation: spin 1s linear infinite; }
        #loading-screen { justify-content: center; align-items: center; }

        /* --- App View --- */
        .app-content { flex-grow: 1; overflow-y: auto; padding: 16px; }
        .app-nav { display: flex; border-top: 1px solid var(--border-color); background: var(--brand-gray); }
        .app-nav-btn {
            flex: 1; text-align: center; padding: 12px 0; cursor: pointer;
            color: var(--text-secondary); border-top: 3px solid transparent;
            transition: all 0.2s ease;
        }
        .app-nav-btn.active { color: var(--brand-green); border-top-color: var(--brand-green); }
        .app-nav-btn .material-symbols-outlined { display: block; margin: 0 auto 4px; }

        .app-tab { display: none; }
        .app-tab.active { display: block; }
        
        /* --- Dashboard Tab --- */
        #dashboard-view { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .dash-card { grid-column: span 1; background: #22272e; padding: 12px; border-radius: 12px; }
        .dash-card h4 { font-size: 0.8rem; color: var(--text-secondary); font-weight: 400; margin-bottom: 4px; }
        .dash-card .value { font-size: 1.5rem; font-weight: 900; color: #fff; }
        .dash-card .value.green { color: var(--brand-green); }
        .dash-card .value.red { color: #FF7373; }
        .chart-card { grid-column: span 2; background: #22272e; padding: 12px; border-radius: 12px; }
        .chart-wrapper { height: 150px; } /* Fixed height for mobile chart */

        /* --- Chat Tab --- */
        #chat-view { height: 100%; display: flex; flex-direction: column; background: #121a20; }
        #chat-view .screen-content { flex-grow: 1; overflow-y: auto; padding: 12px; color: var(--text-primary); }
        #chat-view .bubble { color: #fff; }
        #chat-view .me { background:#005c4b; }
        #chat-view .bot { background:#202c33; border: 1px solid #2a3942; }


        /* --- ONBOARDING STEPS --- */
        .onboarding-steps { display: flex; flex-direction: column; align-items: center; gap: 24px; margin: 0 4%; }
        .onboarding-step { background-color: var(--brand-gray); border: 1px solid var(--border-color); border-radius: var(--radius); padding: 24px; width: 100%; max-width: 700px; display: flex; align-items: center; gap: 24px;}
        .onboarding-step .step-number { font-size: 2rem; font-weight: 900; color: var(--brand-green);}
        .onboarding-step h3 { font-size: 1.3rem; margin-bottom: 4px;}
        .onboarding-step p { color: var(--text-secondary); }
        .onboarding-step code { background-color: var(--brand-dark); padding: 2px 6px; border-radius: 4px; font-family: monospace; color: var(--accent); }

        /* --- PRICING --- */
        .pricing-section { margin: 0 4%; }
        .pricing-grid { display: grid; grid-template-columns: 1fr; gap: 24px; max-width: 900px; margin: 0 auto; }
        @media (min-width: 768px) { .pricing-grid { grid-template-columns: 2fr 1fr; } }
        .pricing-card { background: var(--brand-gray); border: 1px solid var(--border-color); border-radius: var(--radius); padding: 32px; text-align: center;}
        .main-plan { border: 2px solid var(--brand-green); }
        .main-plan h3 { font-size: 1.8rem; margin-bottom: 8px; }
        .price { font-size: 3.5rem; font-weight: 900; color: var(--accent); line-height: 1; }
        .price span { font-size: 1.2rem; font-weight: 400; color: var(--text-secondary); }
        .main-plan ul { list-style: none; padding: 0; margin: 24px 0; text-align: right;}
        .main-plan li { margin-bottom: 12px; font-size: 1.1rem; }
        .main-plan li .material-symbols-outlined { color: var(--brand-green); font-variation-settings: 'FILL' 1; vertical-align: -4px; margin-left: 8px;}
        
        .contact-card { display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .contact-card .material-symbols-outlined { font-size: 48px; color: var(--accent); }
        .contact-card h4 { font-size: 1.4rem; margin-top: 12px; }
        .contact-card p { color: var(--text-secondary); margin-bottom: 20px;}
        .contact-card a { background: var(--brand-dark); border: 1px solid var(--border-color); padding: 10px 20px; border-radius: 8px; }

        /* --- FAQ & FOOTER --- */
        .faq-container { max-width: 800px; margin: var(--section-gap) auto 0; padding: 0 4%; }
        .faq-item { border-bottom: 1px solid var(--border-color); padding: 20px 0; }
        .faq-item summary { font-size: 1.2rem; font-weight: 700; cursor: pointer; display: flex; justify-content: space-between; align-items: center;}
        .faq-item summary::after { content: '+'; font-size: 1.5rem; color: var(--brand-green); transition: transform 0.2s;}
        .faq-item[open] summary::after { transform: rotate(45deg); }
        .faq-item p { color: var(--text-secondary); margin-top: 12px; max-width: 95%;}
        #final-cta { margin: var(--section-gap) 4% 4%; padding: 60px 24px; text-align: center; background: var(--brand-gray); border-radius: var(--radius);}
        footer{padding: 40px 4%;text-align:center;font-size:.85rem;color:var(--text-secondary); }
    </style>
</head>
<body>

<header>
    <a href="#" class="header-logo">Wizbi <span>âœ¨</span></a>
</header>

<main>
    <section class="hero">
        <h1>×”×× ×œ×™×¡×˜ ×”××™×©×™ ×©×œ ×”×¢×¡×§, <span>×‘-WhatsApp</span></h1>
        <p>Wizbi ××ª×—×‘×¨ ×œ× ×ª×•× ×™× ×”×¢×¡×§×™×™× ×©×œ×›× ×•×××¤×©×¨ ×œ×›× ×œ×©××•×œ ×›×œ ×©××œ×” ×‘×¢×‘×¨×™×ª ×¤×©×•×˜×”. <br>×”×ª×—×™×œ×• ×¢× ×—×™×‘×•×¨ ×œ-Morning, ×•×—×‘×¨×• ××§×•×¨×•×ª ××™×“×¢ × ×•×¡×¤×™× ×‘×”××©×š.</p>
        <a href="#onboarding" class="main-cta-btn">×”×ª×—×™×œ×• ×©×‘×•×¢×™×™× × ×™×¡×™×•×Ÿ ×—×™× ×</a>
        <p class="cta-subtitle">×œ×œ× ×¦×•×¨×š ×‘×›×¨×˜×™×¡ ××©×¨××™, ×‘×™×˜×•×œ ×‘×›×œ ×¨×’×¢.</p>
    
        <div class="secondary-cta-container">
            <a href="https://wizbi.ai/morning-demo" target="_blank">
                <span class="material-symbols-outlined">play_circle</span>
                ×”×ª× ×¡×• ×¢×œ ×“××• ×—×™
            </a>
            <a href="#onboarding">
                <span class="material-symbols-outlined">rocket_launch</span>
                ×—×‘×¨×• ××ª ×”×¢×¡×§ ×©×œ×›×
            </a>
        </div>
    </section>

    <section id="interactive-demo">
        <h2 class="section-title">×—×•×•×™×ª Wizbi ×”××œ××”</h2>
        <p class="section-subtitle">××”×—×™×‘×•×¨ ×”×¤×©×•×˜, ×“×¨×š ×”×“×©×‘×•×¨×“ ×”×—×›× ×•×¢×“ ×”×¦'××˜ ×”××™× ×˜×¨××§×˜×™×‘×™ - ×”×›×œ ×‘××§×•× ××—×“.</p>
        <div class="phone-wrapper">
            <div class="phone-inner">
                
                <div id="login-screen" class="demo-screen active">
                    <a href="#" class="header-logo" style="color: var(--text-primary);">Wizbi <span>âœ¨</span></a>
                    <h3>×‘×¨×•×›×™× ×”×‘××™×</h3>
                    <div class="google-btn">
                        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google icon">
                        <span>×”×ª×—×‘×¨ ×¢× Google</span>
                    </div>
                </div>

                <div id="api-key-screen" class="demo-screen">
                    <span class="material-symbols-outlined">key</span>
                    <h3>×—×™×‘×•×¨ ×œ×—×©×‘×•×Ÿ Morning</h3>
                    <p>×”×“×‘×™×§×• ××ª ××¤×ª×— ×”-API ×©×”×¢×ª×§×ª× ××”××ª×¨ ×©×œ Morning.</p>
                    <div class="api-input">c3a7f4e2-9b1d-4c6f-8a0e-1b9d5c8f2a1b</div>
                    <button class="connect-btn">×”×ª×—×‘×¨</button>
                </div>

                <div id="loading-screen" class="demo-screen">
                    <div class="loader"></div>
                 </div>

                <div id="app-view-screen" class="demo-screen">
                    <div class="app-content">
                        <div id="dashboard-view" class="app-tab active">
                            <div class="dash-card">
                                <h4>×”×›× ×¡×•×ª ×”×—×•×“×©</h4>
                                <div class="value green">â‚ª72,410</div>
                            </div>
                            <div class="dash-card">
                                <h4>×”×•×¦××•×ª ×”×—×•×“×©</h4>
                                <div class="value red">â‚ª34,210</div>
                            </div>
                            <div class="chart-card">
                                <h4>×”×›× ×¡×•×ª ××•×œ ×”×•×¦××•×ª</h4>
                                <div class="chart-wrapper">
                                    <canvas id="incomeExpenseChart"></canvas>
                                </div>
                            </div>
                             <div class="chart-card">
                                <h4>×—×•×‘×•×ª ×¤×ª×•×—×™×</h4>
                                <div class="chart-wrapper">
                                    <canvas id="debtChart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div id="chat-view" class="app-tab">
                             <div class="screen-content"></div>
                        </div>
                    </div>
                    <nav class="app-nav">
                        <div class="app-nav-btn active" data-tab="dashboard-view">
                            <span class="material-symbols-outlined">dashboard</span>
                            ×“×©×‘×•×¨×“
                        </div>
                         <div class="app-nav-btn" data-tab="chat-view">
                            <span class="material-symbols-outlined">chat</span>
                            ×¦'××˜
                        </div>
                    </nav>
                </div>

            </div>
        </div>
    </section>

    <section id="onboarding">
        <h2 class="section-title">×—×™×‘×•×¨ ×œ-Morning ×‘-3 ×“×§×•×ª</h2>
        <div class="onboarding-steps">
            <div class="onboarding-step">
                <div class="step-number">1</div>
                <div>
                    <h3>××ª×—×™×œ×™× ×”×ª× ×¡×•×ª ×—×™× × ×‘-Wizbi</h3>
                    <p>×œ×•×—×¦×™× ×¢×œ ×›×¤×ª×•×¨ ×”×”×¨×©××”, ××–×™× ×™× ××™×™×œ ×•×¡×¡××”. ×”×’×¢×ª× ×œ××¡×š ×”×—×™×‘×•×¨.</p>
                </div>
            </div>
            <div class="onboarding-step">
                <div class="step-number">2</div>
                <div>
                    <h3>×™×•×¦×¨×™× ××¤×ª×— API ×—×“×© ×‘-Morning</h3>
                    <p>×‘××ª×¨ ×©×œ Morning, × ×›× ×¡×™× ×œ: <code>×”×’×“×¨×•×ª â† ××¤×ª×—×™× ×•-API â† ×™×¦×™×¨×ª ××¤×ª×— API ×—×“×©</code>. ××¢×ª×™×§×™× ××ª ×”××¤×ª×—.</p>
                </div>
            </div>
             <div class="onboarding-step">
                <div class="step-number">3</div>
                <div>
                    <h3>××“×‘×™×§×™× ××ª ×”××¤×ª×— ×‘-Wizbi</h3>
                    <p>×—×•×–×¨×™× ×œ××¡×š ×”×”×ª×§× ×” ×©×œ Wizbi, ××“×‘×™×§×™× ××ª ×”××¤×ª×— ×‘×©×“×” ×”××™×•×¢×“, ×•×œ×•×—×¦×™× "×”×ª×—×‘×¨". ×–×”×•, ××ª× ×‘×¤× ×™×!</p>
                </div>
            </div>
        </div>
    </section>

    <section id="pricing">
        <h2 class="section-title">×ª××—×•×¨ ×¤×©×•×˜ ×•×”×•×’×Ÿ</h2>
        <div class="pricing-grid">
            <div class="pricing-card main-plan">
                <h3>×ª×•×›× ×™×ª Wizbi Pro</h3>
                <div class="price">95<span>â‚ª</span></div>
                <p>×œ×—×•×“×©, ×œ××©×ª××©</p>
                <ul>
                    <li><span class="material-symbols-outlined">check_circle</span>×—×™×‘×•×¨ ×œ×—×©×‘×•×Ÿ Morning</li>
                    <li><span class="material-symbols-outlined">check_circle</span>×©××œ×•×ª ×œ×œ× ×”×’×‘×œ×” ×‘-WhatsApp</li>
                    <li><span class="material-symbols-outlined">check_circle</span>×“×•×—×•×ª ×™×•××™×™× ×•×©×‘×•×¢×™×™×</li>
                    <li><span class="material-symbols-outlined">check_circle</span>×“×©×‘×•×¨×“ ×•×™×–×•××œ×™ ××ª×§×“×</li>
                    <li><span class="material-symbols-outlined">check_circle</span>×ª××™×›×” ××œ××” ×‘×¢×‘×¨×™×ª</li>
                </ul>
                <a href="#onboarding" class="main-cta-btn" style="font-size: 1.2rem; padding: 16px 40px;">×”×ª×—×™×œ×• ×”×ª× ×¡×•×ª ×—×™× ×</a>
            </div>
            <div class="pricing-card contact-card">
                <span class="material-symbols-outlined">business_center</span>
                <h4>××©×¨×“×™ ×¨×•"×— ×•××¨×’×•× ×™×?</h4>
                <p>×¦×¨×™×›×™× ×¤×ª×¨×•×Ÿ White-Label, × ×™×”×•×œ ××¡×¤×¨ ×œ×§×•×—×•×ª ××• ×ª×›×•× ×•×ª ××ª×§×“××•×ª? ×“×‘×¨×• ××™×ª× ×•.</p>
                <a href="mailto:enterprise@wizbi.ai">×¦×¨×• ×§×©×¨</a>
            </div>
        </div>
    </section>

    <section class="faq-container">
         <h2 class="section-title">×©××œ×•×ª × ×¤×•×¦×•×ª</h2>
        <details class="faq-item">
            <summary>×”×× ×”××™×“×¢ ×”×¢×¡×§×™ ×©×œ×™ ×‘×˜×•×—?</summary>
            <p>×‘×”×—×œ×˜. ×× ×• ××©×ª××©×™× ×‘×—×™×‘×•×¨ API ×¨×©××™ ×©×œ Morning ×¢× ×”×¨×©××•×ª ×§×¨×™××” ×‘×œ×‘×“. ×”××™×“×¢ ××•×¦×¤×Ÿ ××§×¦×” ×œ×§×¦×” ×•×¢×•××“ ×‘×ª×§× ×™× ×”××—××™×¨×™× ×‘×™×•×ª×¨. ×× ×—× ×• ×œ×¢×•×œ× ×œ× ×©×•××¨×™× ××ª ×¡×¡××ª ×”××•×¨× ×™× ×’ ×©×œ×›×.</p>
        </details>
        <details class="faq-item">
            <summary>×”×× ×¦×¨×™×š ×œ×”×–×™×Ÿ ×›×¨×˜×™×¡ ××©×¨××™ ×œ×”×ª× ×¡×•×ª?</summary>
            <p>×œ×. ×ª×§×•×¤×ª ×”×”×ª× ×¡×•×ª ×©×œ 14 ×™×•× ×”×™× ×‘×—×™× × ×œ×—×œ×•×˜×™×Ÿ ×•×œ×œ× ×›×œ ×”×ª×—×™×™×‘×•×ª. ××™×Ÿ ×¦×•×¨×š ×œ×”×–×™×Ÿ ×¤×¨×˜×™ ××©×¨××™ ×›×“×™ ×œ×”×ª×—×™×œ.</p>
        </details>
        <details class="faq-item">
            <summary>××¤×©×¨ ×œ×‘×˜×œ ××ª ×”×× ×•×™ ×‘×›×œ ×¨×’×¢?</summary>
            <p>×›××•×‘×Ÿ. × ×™×ª×Ÿ ×œ×‘×˜×œ ××ª ×”×× ×•×™ ×‘×›×œ ×©×œ×‘ ×‘×œ×—×™×¦×ª ×›×¤×ª×•×¨ ×¤×©×•×˜×” ×“×¨×š ×”×’×“×¨×•×ª ×”×—×©×‘×•×Ÿ. ×‘×œ×™ ×©××œ×•×ª ×•×‘×œ×™ ×”×ª×—×™×™×‘×•×ª.</p>
        </details>
    </section>

    <section id="final-cta">
         <h2 class="section-title" style="margin-top: 0;">××•×›× ×™× ×œ×”×ª×—×™×œ ×œ×§×‘×œ ×”×—×œ×˜×•×ª ×—×›××•×ª ×™×•×ª×¨?</h2>
         <a href="#onboarding" class="main-cta-btn">×›×Ÿ, ×× ×™ ×¨×•×¦×” ×©×‘×•×¢×™×™× ×—×™× ×!</a>
    </section>
</main>

<footer>
    <p>Â© 2025 Wizbi. ×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª.</p>
    <p>Wizbi ×”×•× ××•×¦×¨ ×¢×¦×××™, ×•××™× ×• ×§×©×•×¨ ×œ×—×‘×¨×•×ª Morning ××• WhatsApp.</p>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- Interactive Simulator Logic ---
    const screens = document.querySelectorAll('.demo-screen');
    const googleBtn = document.querySelector('.google-btn');
    const connectBtn = document.querySelector('.connect-btn');
    const navBtns = document.querySelectorAll('.app-nav-btn');
    
    let incomeChart, debtChart; // To hold chart instances
    let chatInterval; // To control chat loop

    function switchScreen(screenId) {
        screens.forEach(screen => {
            screen.classList.remove('active');
        });
        const activeScreen = document.getElementById(screenId);
        if (activeScreen) {
            activeScreen.classList.add('active');
        }
    }

    googleBtn.addEventListener('click', (e) => {
        e.preventDefault();
        switchScreen('api-key-screen');
    });

    connectBtn.addEventListener('click', () => {
        switchScreen('loading-screen');
        setTimeout(() => {
            switchScreen('app-view-screen');
            // Initialize dashboard charts only when the screen is visible
            initializeDashboard();
        }, 1500); // Simulate loading time
    });

    navBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const tabId = btn.dataset.tab;
            
            // Handle active state for buttons
            navBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // Handle active state for tabs
            document.querySelectorAll('.app-tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');

            // Start or stop chat loop based on tab
            if (tabId === 'chat-view') {
                startChat();
            } else {
                stopChat();
            }
        });
    });

    function initializeDashboard() {
        if (!incomeChart) { // Prevent re-initialization
            initializeCharts();
        }
    }

    // --- Chat Logic ---
    const chatContent = document.querySelector('#chat-view .screen-content');
    const messages = [
        { type: 'bot', text: '×©×œ×•× ğŸ‘‹ ×× ×™ Wizbi. ×‘××” ××•×›×œ ×œ×¢×–×•×¨?' },
        { type: 'me', text: '×›××” ×”×›× ×¡×•×ª ×”×™×• ×œ×™ ×”×—×•×“×©?' },
        { type: 'bot', text: '×”×›× ×¡×•×ª ×”×—×•×“×© ×¢×•××“×•×ª ×¢×œ <b>â‚ª72,410</b>.' },
        { type: 'me', text: '×•××™ ×”×œ×§×•×— ×¢× ×”×—×•×‘ ×”×›×™ ×’×“×•×œ?' },
        { type: 'bot', text: '×”×œ×§×•×— ×¢× ×”×—×•×‘ ×”×’×“×•×œ ×‘×™×•×ª×¨ ×”×•× <b>"×¨.×©. ××—×–×§×•×ª"</b> ×¢× ×—×•×‘ ×©×œ â‚ª9,800.' }
    ];
    let messageIndex = 0;

    function runConversation() {
        if (messageIndex >= messages.length) {
            setTimeout(() => {
                chatContent.innerHTML = '';
                messageIndex = 0;
            }, 4000);
            return;
        }

        const msg = messages[messageIndex];
        const bubble = document.createElement('div');
        bubble.className = `bubble ${msg.type}`;
        bubble.innerHTML = msg.text;
        chatContent.appendChild(bubble);

        if(chatContent.parentElement) {
           chatContent.parentElement.scrollTop = chatContent.parentElement.scrollHeight;
        }
        messageIndex++;
    }
    
    function startChat() {
        if (chatInterval) return; // Already running
        chatContent.innerHTML = '';
        messageIndex = 0;
        runConversation(); // Run first message immediately
        chatInterval = setInterval(runConversation, 2500);
    }

    function stopChat() {
        clearInterval(chatInterval);
        chatInterval = null;
    }

    // --- Chart.js Logic ---
    function initializeCharts() {
        const chartTextColor = '#9BA3AE';
        Chart.defaults.color = chartTextColor;
        Chart.defaults.font.family = "'Heebo', sans-serif";
        Chart.defaults.font.size = 10;
        Chart.defaults.plugins.legend.display = false;
        
        const tooltipDefaults = {
            backgroundColor: '#101114',
            titleFont: { weight: 'bold' },
            bodyFont: { size: 10 },
            padding: 8,
            callbacks: {
                label: function(context) {
                    let label = context.dataset.label || '';
                    if (label) { label += ': '; }
                    const value = context.parsed.y ?? context.parsed;
                    if (value !== null) {
                        label += new Intl.NumberFormat('he-IL', { style: 'currency', currency: 'ILS', minimumFractionDigits: 0 }).format(value);
                    }
                    return label;
                }
            }
        };

        const incomeExpenseCtx = document.getElementById('incomeExpenseChart').getContext('2d');
        incomeChart = new Chart(incomeExpenseCtx, {
            type: 'bar',
            data: {
                labels: ['×—×•×“×© ×§×•×“×', '×—×•×“×© × ×•×›×—×™'],
                datasets: [{
                    label: '×”×›× ×¡×•×ª', data: [67046, 72410],
                    backgroundColor: 'rgba(0, 193, 117, 0.6)', borderRadius: 4
                }, {
                    label: '×”×•×¦××•×ª', data: [36010, 34210],
                    backgroundColor: 'rgba(255, 115, 115, 0.6)', borderRadius: 4
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: { y: { display: false }, x: { ticks: { color: chartTextColor } } },
                plugins: { tooltip: tooltipDefaults }
            }
        });

        const debtCtx = document.getElementById('debtChart').getContext('2d');
        debtChart = new Chart(debtCtx, {
            type: 'doughnut',
            data: {
                labels: ['×¨.×©. ××—×–×§×•×ª', '×¡×˜×•×“×™×• ×™×¢×§×‘', '×¨×•× ×™ ×›×”×Ÿ', '××—×¨×™×'],
                datasets: [{
                    data: [9800, 4850, 3200, 3620],
                    backgroundColor: ['#FFD54F', '#00C175', '#FF7373', '#9BA3AE'],
                    borderColor: '#22272e', borderWidth: 2, hoverOffset: 4
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'right', labels: { boxWidth: 10, padding: 10 } },
                    tooltip: tooltipDefaults
                }
            }
        });
    }
});
</script>

</body>
</html>
