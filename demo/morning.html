<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wizbi | אנליסט אישי לעסק שלך, ישירות ב-WhatsApp</title>

    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --brand-green: #00C175;
            --brand-dark: #0d1117;
            --brand-gray: #161b22;
            --accent: #FFD54F;
            --text-primary: #F2F5F7;
            --text-secondary: #9BA3AE;
            --whatsapp-bg: #ECE5DD;
            --radius: 16px;
            --section-gap: 100px;
            --border-color: #30363d;
        }

        * {box-sizing:border-box;margin:0;padding:0;font-family:'Heebo',sans-serif;}
        html { scroll-behavior: smooth; }
        body{background:var(--brand-dark);color:var(--text-primary);line-height:1.6; overflow-x: hidden;}

        a{color:var(--accent);text-decoration:none; font-weight: 700;} a:hover{text-decoration:underline;}

        header{display:flex;align-items:center;justify-content:center;padding:20px 4%;background:rgba(13, 17, 23, 0.85); backdrop-filter: blur(10px); position:sticky;top:0;z-index:100;border-bottom: 1px solid var(--border-color);}
        .header-logo {font-size: 1.8rem;font-weight: 900;color: var(--text-primary);text-decoration: none;}
        .header-logo span { color: var(--accent); }

        .hero{padding:120px 4% 80px;text-align:center;}
        .hero h1{font-size:clamp(2.5rem,7vw,4.2rem);font-weight:900;margin-bottom:20px; line-height: 1.15; color: #fff;}
        .hero h1 span { color: var(--brand-green); }
        .hero p{font-size:clamp(1.1rem,3vw,1.6rem);color:#E1E7EC;margin-bottom:32px;max-width: 800px; margin-left: auto; margin-right: auto;}
        
        .main-cta-btn{
            background:var(--accent); border:none; padding: 18px 48px; font-size:1.3rem; font-weight:900;
            border-radius:50px; cursor:pointer; color:#000; transition: transform 0.2s, box-shadow 0.2s;
            display: inline-block; box-shadow: 0 4px 20px rgba(255, 213, 79, 0.2);
        }
        .main-cta-btn:hover{transform: scale(1.05); box-shadow: 0 6px 25px rgba(255, 213, 79, 0.3);}
        .cta-subtitle { margin-top: 12px; color: var(--text-secondary); }

        .secondary-cta-container { margin-top: 40px; display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 16px;}
        .secondary-cta-container a { color: var(--text-primary); text-decoration: none; background: var(--brand-gray); padding: 12px 24px; border-radius: 12px; border: 1px solid var(--border-color); transition: all 0.2s ease; }
        .secondary-cta-container a:hover { background: var(--brand-green); color: #000; border-color: var(--brand-green); transform: translateY(-2px); }
        .secondary-cta-container a .material-symbols-outlined { font-size: 1.2em; vertical-align: -3px; margin-left: 6px; }

        .section-title {text-align:center;font-size:clamp(2rem, 5vw, 2.8rem);font-weight:900;margin-top:var(--section-gap); margin-bottom: 48px;}
        .section-subtitle { text-align: center; color: var(--text-secondary); font-size: 1.2rem; max-width: 600px; margin: -32px auto 48px; }

        /* --- Wrapper for Demos --- */
        .demo-wrapper {
            /* Stacks vertically by default on mobile */
        }
        @media (min-width: 992px) {
            .demo-wrapper {
                display: flex;
                align-items: flex-start; /* Aligns items to the top */
                justify-content: center;
                gap: 40px; 
                padding: 0 4%;
            }
            .demo-wrapper > section {
                flex: 1; 
                max-width: 450px; 
            }
        }
        
        /* --- WhatsApp Auto Demo --- */
        #whatsapp-auto-demo .phone-wrapper { margin:40px auto;width:340px;height:700px;background:#111;border:14px solid #333;border-radius:48px;position:relative; box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
        #whatsapp-auto-demo .phone-inner { width: 100%; height: 100%; border-radius: 34px; background-color: var(--whatsapp-bg); display: flex; flex-direction: column;}
        #whatsapp-auto-demo .chat-header { background: #f0f2f5; padding: 10px; display: flex; align-items: center; border-radius: 34px 34px 0 0; gap: 12px; border-bottom: 1px solid #e0e0e0;}
        #whatsapp-auto-demo .profile-icon { background: var(--brand-green); width: 40px; height: 40px; border-radius: 50%; display: grid; place-items: center;}
        #whatsapp-auto-demo .profile-icon .material-symbols-outlined { color: #fff; font-size: 24px; font-variation-settings: 'FILL' 1;}
        #whatsapp-auto-demo .chat-header-text { color: #111b21; flex-grow: 1;}
        #whatsapp-auto-demo .chat-header-text h4 { font-size: 1rem; font-weight: 700; margin: 0; }
        #whatsapp-auto-demo .chat-header-text p { font-size: 0.8rem; color: #54656f; margin: 0; }
        #whatsapp-auto-demo .chat-icons .material-symbols-outlined { color: #54656f; margin-left: 16px; }
        #whatsapp-auto-demo .screen{flex-grow: 1; padding: 18px 12px;overflow-y:auto; display: flex; flex-direction: column-reverse;}
        #whatsapp-auto-demo .screen-content { display: flex; flex-direction: column; gap: 4px; color: #111b21;}
        #whatsapp-auto-demo .bubble{max-width:85%;padding:8px 12px;border-radius:12px;font-size:.9rem;margin-bottom:4px;line-height:1.4; opacity: 0; transform: translateY(20px); animation: slide-up 0.5s forwards ease-out;}
        #whatsapp-auto-demo .me{background:#d9fdd3;margin-left:auto; border-radius: 12px 12px 0 12px;}
        #whatsapp-auto-demo .bot{background:#fff;border-radius: 12px 12px 12px 0; box-shadow: 0 1px 1px rgba(0,0,0,0.05); align-self: flex-start;}
        #whatsapp-auto-demo .chat-footer { padding: 8px 12px; background: #f0f2f5; border-radius: 0 0 34px 34px; display: flex; align-items: center;}
        #whatsapp-auto-demo .chat-input-wrapper { background: #fff; border-radius: 20px; padding: 8px 12px; flex-grow: 1; display: flex; align-items: center;}
        #whatsapp-auto-demo .chat-input-wrapper .material-symbols-outlined { color: #54656f; }
        #whatsapp-auto-demo .chat-input-wrapper .text { color: #54656f; font-size: 0.9rem; flex-grow: 1; margin: 0 8px;}
        #whatsapp-auto-demo .mic-btn { background: var(--brand-green); border-radius: 50%; padding: 8px; display: grid; place-items: center; margin-right: 8px;}
        #whatsapp-auto-demo .mic-btn .material-symbols-outlined { color: #fff; font-size: 24px;}
        @keyframes slide-up { to { opacity: 1; transform: translateY(0); } }

        /* --- Interactive Demo --- */
        #interactive-demo .phone-wrapper{margin:40px auto;width:340px;height:700px;background:#111;border:14px solid #333;border-radius:48px;position:relative; box-shadow: 0 20px 40px rgba(0,0,0,0.4); padding: 12px;}
        #interactive-demo .phone-inner { width: 100%; height: 100%; border-radius: 34px; background-color: var(--brand-dark); display: flex; flex-direction: column; overflow: hidden; position: relative;}
        
        .demo-screen {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: var(--brand-dark); color: var(--text-primary);
            transition: opacity 0.4s ease, transform 0.4s ease;
            opacity: 0; transform: scale(1.05);
            pointer-events: none;
            display: flex; flex-direction: column; z-index: 1;
        }
        .demo-screen.active { opacity: 1; transform: scale(1); pointer-events: auto; z-index: 2; }

        #login-screen { justify-content: center; align-items: center; gap: 24px; }
        #login-screen h3 { font-size: 1.8rem; }
        .google-btn { display: flex; align-items: center; gap: 12px; background: #fff; color: #333; padding: 12px 24px; border-radius: 8px; font-weight: 700; cursor: pointer;}
        .google-btn img { height: 24px; }

        #api-key-screen { justify-content: center; align-items: center; gap: 16px; padding: 20px; text-align: center; }
        #api-key-screen .material-symbols-outlined { font-size: 48px; color: var(--brand-green); }
        #api-key-screen p { color: var(--text-secondary); font-size: 0.9rem; }
        .api-input { font-family: monospace; background: var(--brand-gray); border: 1px solid var(--border-color); padding: 12px; border-radius: 8px; color: var(--text-secondary); width: 100%; text-align: center;}
        .connect-btn { background: var(--brand-green); color: #000; font-weight: 700; padding: 12px 32px; border: none; border-radius: 8px; cursor: pointer; width: 100%;}
        
        /* --- Loading Screen with Text --- */
        #loading-screen { justify-content: center; align-items: center; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loader { width: 48px; height: 48px; border: 4px solid var(--border-gray); border-top-color: var(--brand-green); border-radius: 50%; animation: spin 1s linear infinite; }
        p.loading-text {
            color: var(--text-secondary);
            text-align: center;
            margin-top: 24px;
            font-size: 0.9rem;
            line-height: 1.5;
            padding: 0 20px;
        }


        .app-content { position: relative; flex-grow: 1; overflow: hidden; }
        .app-nav { display: flex; border-top: 1px solid var(--border-color); background: var(--brand-gray); }
        .app-nav-btn { flex: 1; text-align: center; padding: 12px 0; cursor: pointer; color: var(--text-secondary); border-top: 3px solid transparent; transition: all 0.2s ease;}
        .app-nav-btn.active { color: var(--brand-green); border-top-color: var(--brand-green); }
        .app-nav-btn .material-symbols-outlined { display: block; margin: 0 auto 4px; }

        /* --- CHANGE 1: Disabled scrolling on tabs --- */
        .app-tab { position: absolute; top:0; left:0; width:100%; height:100%; opacity: 0; pointer-events: none; transition: opacity 0.3s ease-in-out; overflow: hidden;}
        .app-tab.active { opacity: 1; pointer-events: auto; }
        
        /* --- CHANGE 2: Made dashboard grid flexible --- */
        #dashboard-view { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: auto 1fr 1fr; gap: 12px; padding: 16px; height: 100%;}
        .dash-card { grid-column: span 1; background: #22272e; padding: 12px; border-radius: 12px; }
        .dash-card h4 { font-size: 0.8rem; color: var(--text-secondary); font-weight: 400; margin-bottom: 4px; }
        .dash-card .value { font-size: 1.5rem; font-weight: 900; color: #fff; }
        .dash-card .value.green { color: var(--brand-green); }
        .dash-card .value.red { color: #FF7373; }
        .chart-card { grid-column: span 2; background: #22272e; padding: 12px; border-radius: 12px; display: flex; flex-direction: column; }
        
        /* --- CHANGE 3: Made chart wrappers fill available space --- */
        .chart-wrapper { height: 100%; }

        #chat-view { padding: 0; display: flex; flex-direction: column; background: #1a1d21; }
        #chat-view .chat-header-sim { padding: 12px; background: var(--brand-gray); border-bottom: 1px solid var(--border-color); text-align: center; }
        #chat-view .chat-header-sim h4 { font-weight: 700; margin:0; }
        #chat-view .chat-header-sim p { color: var(--brand-green); font-size: 0.8rem; margin:0; font-weight: 700; }
        #chat-view .conversation-area { flex-grow: 1; overflow-y: auto; padding: 12px; display: flex; flex-direction: column; gap: 10px; }
        #chat-view .sim-bubble { max-width: 80%; padding: 10px 14px; border-radius: 10px; line-height: 1.4; }
        #chat-view .sim-bubble.sim-me { background: var(--brand-green); color: #000; align-self: flex-end; border-radius: 10px 10px 0 10px; }
        #chat-view .sim-bubble.sim-bot { background: #2c313a; color: var(--text-primary); align-self: flex-start; border-radius: 10px 10px 10px 0; }
        
        #chat-view .input-area { padding: 12px; border-top: 1px solid var(--border-color); background: #1a1d21; }
        .suggested-questions { display: flex; flex-direction: column; gap: 8px; margin-bottom: 12px; }
        .suggested-questions button { background: #2a3942; color: var(--text-primary); border: 1px solid var(--border-color); padding: 10px; border-radius: 20px; text-align: center; cursor: pointer; }
        .suggested-questions button:disabled { opacity: 0.4; cursor: not-allowed; }
        .fake-input { background: #2c313a; padding: 12px; border-radius: 8px; color: var(--text-secondary); text-align: right; }

        .onboarding-steps { display: flex; flex-direction: column; align-items: center; gap: 24px; margin: 0 4%; }
        .onboarding-step { background-color: var(--brand-gray); border: 1px solid var(--border-color); border-radius: var(--radius); padding: 24px; width: 100%; max-width: 700px; display: flex; align-items: center; gap: 24px;}
        .onboarding-step .step-number { font-size: 2rem; font-weight: 900; color: var(--brand-green);}
        .onboarding-step h3 { font-size: 1.3rem; margin-bottom: 4px;}
        .onboarding-step p { color: var(--text-secondary); }
        .onboarding-step code { background-color: var(--brand-dark); padding: 2px 6px; border-radius: 4px; font-family: monospace; color: var(--accent); }
        .pricing-section { margin: 0 4%; }
        .pricing-grid { display: grid; grid-template-columns: 1fr; gap: 24px; max-width: 900px; margin: 0 auto; }
        @media (min-width: 768px) { .pricing-grid { grid-template-columns: 2fr 1fr; } }
        .pricing-card { background: var(--brand-gray); border: 1px solid var(--border-color); border-radius: var(--radius); padding: 32px; text-align: center;}
        .main-plan { border: 2px solid var(--brand-green); }
        .main-plan h3 { font-size: 1.8rem; margin-bottom: 8px; }
        .price { font-size: 3.5rem; font-weight: 900; color: var(--accent); line-height: 1; }
        .price span { font-size: 1.2rem; font-weight: 400; color: var(--text-secondary); }
        .main-plan ul { list-style: none; padding: 0; margin: 24px 0; text-align: right;}
        .main-plan li { margin-bottom: 12px; font-size: 1.1rem; }
        .main-plan li .material-symbols-outlined { color: var(--brand-green); font-variation-settings: 'FILL' 1; vertical-align: -4px; margin-left: 8px;}
        .contact-card { display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .contact-card .material-symbols-outlined { font-size: 48px; color: var(--accent); }
        .contact-card h4 { font-size: 1.4rem; margin-top: 12px; }
        .contact-card p { color: var(--text-secondary); margin-bottom: 20px;}
        .contact-card a { background: var(--brand-green); color: black; border: 1px solid var(--brand-green); padding: 12px 24px; border-radius: 50px; }
        .faq-container { max-width: 800px; margin: var(--section-gap) auto 0; padding: 0 4%; }
        .faq-item { border-bottom: 1px solid var(--border-color); padding: 20px 0; }
        .faq-item summary { font-size: 1.2rem; font-weight: 700; cursor: pointer; display: flex; justify-content: space-between; align-items: center;}
        .faq-item summary::after { content: '+'; font-size: 1.5rem; color: var(--brand-green); transition: transform 0.2s;}
        .faq-item[open] summary::after { transform: rotate(45deg); }
        .faq-item p { color: var(--text-secondary); margin-top: 12px; max-width: 95%;}
        #final-cta { margin: var(--section-gap) 4% 4%; padding: 60px 24px; text-align: center; background: var(--brand-gray); border-radius: var(--radius);}
        footer{padding: 40px 4%;text-align:center;font-size:.85rem;color:var(--text-secondary); }
    </style>
</head>
<body>

<header>
    <a href="#" class="header-logo">WizBi.AI <span>✨</span></a>
</header>

<main>
    <section class="hero">
        <h1>האנליסט האישי של העסק, <span>ב-WhatsApp</span></h1>
        <p>Wizbi מתחבר לנתונים העסקיים שלכם ומאפשר לכם לשאול כל שאלה בעברית פשוטה. <br>התחילו עם חיבור ל-Morning, וחברו מקורות מידע נוספים בהמשך.</p>
        <a href="#onboarding" class="main-cta-btn">התחילו שבועיים ניסיון חינם</a>
        <p class="cta-subtitle">ללא צורך בכרטיס אשראי, ביטול בכל רגע.</p>
        <div class="secondary-cta-container">
            <a href="https://wizbi.ai/morning-demo" target="_blank"><span class="material-symbols-outlined">play_circle</span> התנסו על דמו חי</a>
            <a href="#onboarding"><span class="material-symbols-outlined">rocket_launch</span> חברו את העסק שלכם</a>
        </div>
    </section>

    <div class="demo-wrapper">
        <section id="whatsapp-auto-demo">
            <h2 class="section-title"> האנליסט בפעולה בווצאפ </h2>
              <div class="phone-wrapper">
                  <div class="phone-inner">
                      <div class="chat-header"><div class="profile-icon"><span class="material-symbols-outlined">auto_awesome</span></div><div class="chat-header-text"><h4>Wizbi</h4><p>מחובר</p></div><div class="chat-icons"><span class="material-symbols-outlined">more_vert</span></div></div>
                      <div class="screen"><div class="screen-content"></div></div>
                      <div class="chat-footer"><div class="mic-btn"><span class="material-symbols-outlined">mic</span></div><div class="chat-input-wrapper"><span class="material-symbols-outlined">add_reaction</span><div class="text">כתבו הודעה...</div><span class="material-symbols-outlined">attach_file</span></div></div>
                  </div>
              </div>
        </section>
        
        <section id="interactive-demo">
            <h2 class="section-title">חווית Wizbi המלאה</h2>
            <p class="section-subtitle">מהחיבור הפשוט, דרך הדשבורד החכם ועד הצ'אט האינטראקטיבי.</p>
            <div class="phone-wrapper">
                <div class="phone-inner">
                    <div id="login-screen" class="demo-screen active">
                        <a href="#" class="header-logo" style="color: var(--text-primary);">Wizbi <span>✨</span></a>
                        <h3>ברוכים הבאים</h3>
                        <a href="#" class="google-btn"><img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google icon"><span>התחבר עם Google</span></a>
                    </div>
                    <div id="api-key-screen" class="demo-screen"><span class="material-symbols-outlined">key</span><h3>חיבור לחשבון Morning</h3><p>הדביקו את מפתח ה-API שהעתקתם מהאתר של Morning.</p><div class="api-input">c3a7f4e2-9b1d-4c6f-8a0e-1b9d5c8f2a1b</div><button class="connect-btn">התחבר</button></div>
                    
                    <div id="loading-screen" class="demo-screen">
                        <div class="loader"></div>
                        <p class="loading-text">מנתח את הנתונים ומפיק תובנות...<br>פעולה זו עשויה לקחת מספר רגעים.</p>
                    </div>

                    <div id="app-view-screen" class="demo-screen">
                        <div class="app-content">
                            <div id="dashboard-view" class="app-tab active"><div class="dash-card"><h4>הכנסות החודש</h4><div class="value green">₪72,410</div></div><div class="dash-card"><h4>הוצאות החודש</h4><div class="value red">₪34,210</div></div><div class="chart-card"><h4>הכנסות מול הוצאות</h4><div class="chart-wrapper"><canvas id="incomeExpenseChart"></canvas></div></div><div class="chart-card"><h4>חובות פתוחים לפי לקוח</h4><div class="chart-wrapper"><canvas id="debtChart"></canvas></div></div></div>
                            <div id="chat-view" class="app-tab"><div class="chat-header-sim"><h4>Wizbi</h4><p>מחובר</p></div><div class="conversation-area"></div><div class="input-area"><div class="suggested-questions"></div><div class="fake-input">שאלו כל דבר...</div></div></div>
                        </div>
                        <nav class="app-nav">
                            <div class="app-nav-btn active" data-tab="dashboard-view"><span class="material-symbols-outlined">dashboard</span>דשבורד</div>
                            <div class="app-nav-btn" data-tab="chat-view"><span class="material-symbols-outlined">chat</span>צ'אט</div>
                        </nav>
                    </div>
                </div>
            </div>
        </section>
    </div>


    <section id="onboarding">
        <h2 class="section-title">חיבור ל-Morning ב-3 דקות</h2>
        <div class="onboarding-steps"><div class="onboarding-step"><div class="step-number">1</div><div><h3>מתחילים התנסות חינם ב-Wizbi</h3><p>לוחצים על כפתור ההרשמה, מזינים מייל וססמה. הגעתם למסך החיבור.</p></div></div><div class="onboarding-step"><div class="step-number">2</div><div><h3>יוצרים מפתח API חדש ב-Morning</h3><p>באתר של Morning, נכנסים ל: <code>הגדרות ← מפתחים ו-API ← יצירת מפתח API חדש</code>. מעתיקים את המפתח.</p></div></div><div class="onboarding-step"><div class="step-number">3</div><div><h3>מדביקים את המפתח ב-Wizbi</h3><p>חוזרים למסך ההתקנה של Wizbi, מדביקים את המפתח בשדה המיועד, ולוחצים "התחבר". זהו, אתם בפנים!</p></div></div></div>
    </section>
    <section id="pricing">
        <h2 class="section-title">תמחור פשוט והוגן</h2>
        <div class="pricing-grid"><div class="pricing-card main-plan"><h3>תוכנית Wizbi Pro</h3><div class="price">95<span>₪</span></div><p>לחודש, למשתמש</p><ul><li><span class="material-symbols-outlined">check_circle</span>חיבור לחשבון Morning</li><li><span class="material-symbols-outlined">check_circle</span>שאלות ללא הגבלה ב-WhatsApp</li><li><span class="material-symbols-outlined">check_circle</span>דוחות יומיים ושבועיים</li><li><span class="material-symbols-outlined">check_circle</span>דשבורד ויזואלי מתקדם</li><li><span class="material-symbols-outlined">check_circle</span>תמיכה מלאה בעברית</li></ul><a href="#onboarding" class="main-cta-btn" style="font-size: 1.2rem; padding: 16px 40px;">התחילו התנסות חינם</a></div><div class="pricing-card contact-card"><span class="material-symbols-outlined">business_center</span><h4>משרדי רו"ח וארגונים?</h4><p>צריכים פתרון White-Label, ניהול מספר לקוחות או תכונות מתקדמות? דברו איתנו.</p><a href="https://wa.me/972506579403" target="_blank">שוחחו איתנו ב-WhatsApp</a></div></div>
    </section>
    <section class="faq-container">
         <h2 class="section-title">שאלות נפוצות</h2>
        <details class="faq-item"><summary>האם המידע העסקי שלי בטוח?</summary><p>בהחלט. אנו משתמשים בחיבור API רשמי של Morning עם הרשאות קריאה בלבד. המידע מוצפן מקצה לקצה ועומד בתקנים המחמירים ביותר. אנחנו לעולם לא שומרים את ססמת המורנינג שלכם.</p></details>
        <details class="faq-item"><summary>האם צריך להזין כרטיס אשראי להתנסות?</summary><p>לא. תקופת ההתנסות של 14 יום היא בחינם לחלוטין וללא כל התחייבות. אין צורך להזין פרטי אשראי כדי להתחיל.</p></details>
        <details class="faq-item"><summary>אפשר לבטל את המנוי בכל רגע?</summary><p>כמובן. ניתן לבטל את המנוי בכל שלב בלחיצת כפתור פשוטה דרך הגדרות החשבון. בלי שאלות ובלי התחייבות.</p></details>
    </section>
    <section id="final-cta"><h2 class="section-title" style="margin-top: 0;">מוכנים להתחיל לקבל החלטות חכמות יותר?</h2><a href="#onboarding" class="main-cta-btn">כן, אני רוצה שבועיים חינם!</a></section>
</main>
<footer><p>© 2025 Wizbi. כל הזכויות שמורות.</p><p>Wizbi הוא מוצר עצמאי, ואינו קשור לחברות Morning או WhatsApp.</p><p>Built by <a href="https://bimagics.com" target="_blank" style="color: var(--text-secondary); text-decoration: underline;">bimagics.com</a></p></footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const autoDemoContainer = document.getElementById('whatsapp-auto-demo');
    if (autoDemoContainer) {
        const autoChatContent = autoDemoContainer.querySelector('.screen-content');
        const autoMessages = [
            { type: 'bot', text: 'בוקר טוב 👋 אני Wizbi, האנליסט העסקי שלך. במה אוכל לסייע היום?' },
            { type: 'me', text: 'היי, איך אני יכול לשפר את תזרים המזומנים שלי החודש?' },
            { type: 'bot', text: 'בדיקה מהירה... זיהיתי שיש לך <b>חובות פתוחים בסך ₪19,870</b>. גבייה של חובות אלו תשפר משמעותית את התזרים.' },
            { type: 'bot', text: 'הלקוח עם החוב הגדול והישן ביותר הוא <b>"ר.ש. אחזקות"</b>, עם חשבונית על סך ₪9,800 שזמן פירעונה עבר לפני 25 ימים. תרצה שאנסח עבורך הודעת תזכורת ידידותית?' },
            { type: 'me', text: 'כן בטח, תכין לי הודעה.' },
            { type: 'bot', text: 'מעולה. הנה הצעה:<br>"היי רוני, רק תזכורת ידידותית לגבי חשבונית מספר 4512 על סך ₪9,800 שזמן פירעונה עבר. נודה לעדכונך מתי התשלום צפוי להתבצע. תודה, [שם העסק]"<br><br>ניתן להעתיק ולהדביק.' },
            { type: 'me', text: 'נשמע טוב. ואיך ההכנסות שלי ברבעון הנוכחי בהשוואה לקודם?' },
            { type: 'bot', text: 'ברבעון הנוכחי הכנסותיך עומדות על <b>₪125,400</b>, זו עלייה יפה של 18% לעומת הרבעון הקודם (₪106,270). כל הכבוד! העלייה נובעת בעיקר מגידול בהזמנות מלקוחות קיימים.' }
        ];
        let autoMessageIndex = 0;
        let intervalId = null;
        
        const runAutoConversation = () => {
            if (autoMessageIndex >= autoMessages.length) {
                clearInterval(intervalId);
                setTimeout(() => { 
                    autoChatContent.innerHTML = ''; 
                    autoMessageIndex = 0;
                    intervalId = setInterval(runAutoConversation, 2500);
                }, 5000);
                return;
            }
            const msg = autoMessages[autoMessageIndex];
            const bubble = document.createElement('div');
            bubble.className = `bubble ${msg.type}`;
            bubble.innerHTML = msg.text;
            autoChatContent.appendChild(bubble);
            if(autoChatContent.parentElement) { autoChatContent.parentElement.scrollTop = autoChatContent.parentElement.scrollHeight; }
            autoMessageIndex++;
        }
        intervalId = setInterval(runAutoConversation, 2500);
    }

    const simulator = document.getElementById('interactive-demo');
    if (simulator) {
        let incomeChart, debtChart; 

        const switchScreen = (screenId) => {
            simulator.querySelectorAll('.demo-screen').forEach(screen => screen.classList.remove('active'));
            const activeScreen = simulator.querySelector('#' + screenId);
            if (activeScreen) activeScreen.classList.add('active');
        };

        const initializeCharts = () => {
            Chart.defaults.color = '#9BA3AE'; Chart.defaults.font.family = "'Heebo', sans-serif"; Chart.defaults.font.size = 10;
            const tooltipDefaults = { backgroundColor: '#101114', titleFont: { weight: 'bold' }, bodyFont: { size: 10 }, padding: 8, callbacks: { label: (c) => `${c.dataset.label || ''}: ${new Intl.NumberFormat('he-IL', { style: 'currency', currency: 'ILS', minimumFractionDigits: 0 }).format(c.parsed.y || c.parsed)}` } };
            
            const incomeCtx = document.getElementById('incomeExpenseChart')?.getContext('2d');
            if(incomeCtx) {
              incomeChart = new Chart(incomeCtx, { type: 'bar', data: { labels: ['חודש קודם', 'חודש נוכחי'], datasets: [{ label: 'הכנסות', data: [67046, 72410], backgroundColor: 'rgba(0, 193, 117, 0.6)', borderRadius: 4 }, { label: 'הוצאות', data: [36010, 34210], backgroundColor: 'rgba(255, 115, 115, 0.6)', borderRadius: 4 }] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { display: false }, x: { ticks: { color: '#9BA3AE' } } }, plugins: { legend: {display: false}, tooltip: tooltipDefaults } } });
            }

            const debtCtx = document.getElementById('debtChart')?.getContext('2d');
            if(debtCtx) {
              debtChart = new Chart(debtCtx, { type: 'doughnut', data: { labels: ['ר.ש. אחזקות', 'סטודיו יעקב', 'רוני כהן', 'אחרים'], datasets: [{ data: [9800, 4850, 3200, 3620], backgroundColor: ['#FF7373', '#00C175', '#FFD54F', '#9BA3AE'], borderColor: '#22272e', borderWidth: 2, hoverOffset: 4 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { 
                    legend: { display: true, position: 'bottom', labels: { boxWidth: 10, padding: 15 } }, 
                    tooltip: {
                        ...tooltipDefaults,
                        callbacks: {
                            label: (c) => `${c.label}: ${new Intl.NumberFormat('he-IL', { style: 'currency', currency: 'ILS', minimumFractionDigits: 0 }).format(c.parsed)}`
                        }
                    }
                } } });
            }
        }

        const conversationArea = simulator.querySelector('.conversation-area');
        const questionsArea = simulator.querySelector('.suggested-questions');
        const qaPairs = {
            "השווה את ביצועי העסק בין החודש הנוכחי לקודם.": "החודש הכנסותיך עלו ב-8% ל-<b>₪72,410</b>, והרווח הנקי גדל ב-15% בזכות ירידה בהוצאות. בנוסף, מספר הלקוחות החדשים גדל ב-3. עבודה מצוינת!",
            "תן לי טיפ עסקי לשיפור על סמך הנתונים שלי.": "בוודאי. זיהיתי ש-70% מהכנסותיך מגיעות מ-3 לקוחות גדולים בלבד. זוהי תלות גבוהה. אני ממליץ לגוון את בסיס הלקוחות כדי להקטין את הסיכון. אפשר להתחיל בפנייה ללקוחות קטנים יותר מאותו תחום.",
            "איזה מוצר או שירות הכי פחות נמכר לאחרונה?": "נראה שהשירות <b>'ייעוץ אסטרטגי'</b> לא נמכר כלל ב-60 הימים האחרונים. אולי כדאי לשקול מבצע או קמפיין ממוקד כדי להגביר את המודעות אליו."
        };
        
        const initializeInteractiveChat = () => {
            if (!conversationArea || !questionsArea) return;
            conversationArea.innerHTML = '';
            addSimMessage('sim-bot', 'שלום, אני Wizbi. בחרו שאלה כדי לקבל תובנה עסקית.');
            renderQuestions();
        };
        const addSimMessage = (type, text) => {
            const bubble = document.createElement('div');
            bubble.className = `sim-bubble ${type}`;
            bubble.innerHTML = text;
            conversationArea.appendChild(bubble);
            conversationArea.scrollTop = conversationArea.scrollHeight;
        };
        const renderQuestions = () => {
            questionsArea.innerHTML = '';
            Object.keys(qaPairs).forEach(question => {
                const btn = document.createElement('button');
                btn.textContent = question;
                questionsArea.appendChild(btn);
            });
        };
        
        const googleBtn = simulator.querySelector('.google-btn');
        if (googleBtn) {
            googleBtn.addEventListener('click', (event) => {
                event.preventDefault(); 
                switchScreen('api-key-screen');
            });
        }

        simulator.addEventListener('click', function(event) {
            const target = event.target;

            if (target.closest('.connect-btn')) {
                switchScreen('loading-screen');
                setTimeout(() => {
                    switchScreen('app-view-screen');
                    if (!incomeChart) initializeCharts();
                }, 2500);
                return;
            }

            const navBtn = target.closest('.app-nav-btn');
            if (navBtn) {
                const tabId = navBtn.dataset.tab;
                simulator.querySelectorAll('.app-nav-btn').forEach(b => b.classList.remove('active'));
                navBtn.classList.add('active');
                simulator.querySelectorAll('.app-tab').forEach(tab => tab.classList.remove('active'));
                const activeTab = simulator.querySelector('#' + tabId);
                if (activeTab) {
                    activeTab.classList.add('active');
                    if (tabId === 'chat-view' && !activeTab.dataset.initialized) {
                        initializeInteractiveChat();
                        activeTab.dataset.initialized = 'true';
                    }
                }
                return;
            }

            const questionBtn = target.closest('.suggested-questions button');
            if (questionBtn) {
                 if(questionBtn.textContent === 'התחל שיחה מחדש'){
                     initializeInteractiveChat();
                     return;
                 }

                if (!questionBtn.disabled) {
                    const question = questionBtn.textContent;
                    addSimMessage('sim-me', question);
                    questionsArea.innerHTML = '<p style="text-align:center;color:var(--text-secondary);font-size:0.9rem;">Wizbi חושב...</p>';
                    
                    setTimeout(() => {
                        addSimMessage('sim-bot', qaPairs[question]);
                        const answeredQuestions = [...conversationArea.querySelectorAll('.sim-me')].map(el => el.textContent);
                        
                        if (answeredQuestions.length >= Object.keys(qaPairs).length) {
                            questionsArea.innerHTML = '';
                            const resetButton = document.createElement('button');
                            resetButton.textContent = 'התחל שיחה מחדש';
                            questionsArea.appendChild(resetButton);
                        } else {
                            renderQuestions();
                            [...questionsArea.querySelectorAll('button')].forEach(btn => {
                                if (answeredQuestions.includes(btn.textContent)) { btn.disabled = true; }
                            });
                        }
                    }, 1200);
                }
            }
        });
    }
});
</script>

</body>
</html>
