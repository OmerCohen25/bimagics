<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Genesis Demo</title>
    <style>
        /* --- Basic Setup & Fonts --- */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap');
        
        :root {
            --background-color: #0a0a1a;
            --chat-background: #121224;
            --chat-bubble-user: #4a4a8a;
            --text-color: #e0e0ff;
            --header-bg: #1a1a3a;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            overflow: hidden;
        }

        /* --- Main Layout --- */
        .container {
            display: flex;
            width: 100%;
            height: 100%;
        }

        .chat-panel {
            width: 45%;
            height: 100%;
            background-color: var(--chat-background);
            border-right: 1px solid #333;
            display: flex;
            flex-direction: column;
            box-shadow: 5px 0px 15px rgba(0,0,0,0.3);
        }

        .output-panel {
            width: 55%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        /* --- Panel Headers --- */
        .panel-header {
            padding: 18px 22px;
            background-color: var(--header-bg);
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            letter-spacing: 2px;
            text-transform: uppercase;
            flex-shrink: 0;
            border-bottom: 1px solid #333;
            text-shadow: 0 0 5px #a0a0ff;
        }
        
        /* --- Chat Window Styling --- */
        .chat-window {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .chat-message {
            margin-bottom: 18px;
            display: flex;
            flex-direction: column;
            max-width: 85%;
            animation: fadeIn 0.6s ease-out;
        }

        .message-bubble {
            padding: 12px 18px;
            border-radius: 20px;
            line-height: 1.5;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .agent-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 13px;
            font-weight: 700;
            margin-bottom: 5px;
            padding: 0 5px;
        }
        
        .message-bubble p { margin: 0; }

        /* --- Agent Specific Styles --- */
        .user { align-self: flex-end; }
        .user .message-bubble { background: linear-gradient(135deg, #5f72be, #9666a3); border-top-right-radius: 0; }
        .user .agent-name { text-align: right; color: #d0d0ff; }
        
        .visionary { align-items: flex-start; }
        .visionary .message-bubble { background: linear-gradient(135deg, #00A8A8, #007A7A); border-top-left-radius: 0; }
        .visionary .agent-name { color: #00E0E0; }

        .architect { align-items: flex-start; }
        .architect .message-bubble { background: linear-gradient(135deg, #A85A00, #7A4200); border-top-left-radius: 0; }
        .architect .agent-name { color: #FFAA00; }
        
        .coder { align-items: flex-start; }
        .coder .message-bubble { background: linear-gradient(135deg, #A8005A, #7A0042); border-top-left-radius: 0; }
        .coder .agent-name { color: #FF0088; }
        
        .player { align-items: flex-start; }
        .player .message-bubble { background: linear-gradient(135deg, #00A85A, #007A42); border-top-left-radius: 0; }
        .player .agent-name { color: #00FF88; }

        /* --- Output Iframe Styling --- */
        .output-iframe {
            flex-grow: 1;
            border: none;
            background-color: #000;
            transition: opacity 1s ease-in-out;
        }
        
        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="chat-panel">
            <div class="panel-header">GENESIS CORE</div>
            <div class="chat-window" id="chat-window">
                </div>
        </div>

        <div class="output-panel">
            <div class="panel-header">LIVE CANVAS</div>
            <iframe class="output-iframe" id="output-iframe" title="Live Output"></iframe>
        </div>
    </div>

    <script>
        // --- DOM Elements ---
        const chatWindow = document.getElementById('chat-window');
        const outputIframe = document.getElementById('output-iframe');

        // --- State Management ---
        const projectState = { code: "", history: [], };
        
        // --- Utility Functions ---
        const sleep = ms => new Promise(resolve => setTimeout(resolve, ms));
        
        function addMessageToChat(agent, message) {
            const agentMap = {
                user: { name: 'üë§ User', class: 'user' },
                visionary: { name: 'üí° Visionary', class: 'visionary' },
                architect: { name: '‚ö° Architect', class: 'architect' },
                coder: { name: 'üëæ Coder', class: 'coder' },
                player: { name: 'üïπÔ∏è Player Bot', class: 'player' }
            };
            const agentInfo = agentMap[agent];
            const messageElement = document.createElement('div');
            messageElement.className = `chat-message ${agentInfo.class}`;
            messageElement.innerHTML = `
                <div class="agent-name">${agentInfo.name}</div>
                <div class="message-bubble"><p>${message}</p></div>
            `;
            chatWindow.appendChild(messageElement);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
        
        const updateIframe = newCode => outputIframe.srcdoc = newCode;

        // --- MOCK AI AGENTS (WITH ENHANCED DIALOGUE & CODE EVOLUTION) ---
        
        async function visionaryAgent(history) {
            await sleep(2000);
            const stage = history.length;
            if (stage === 1) return "The void is receptive. Let's cast a blueprint‚Äîa wireframe of what's to come. Give it form, a skeleton of light and logic. No colors, just pure structure.";
            if (stage === 2) return "Structure is confirmed. Now, breathe life into it! We need a cosmic gradient, typography that speaks of the future, and a central point of focus. Animate the entrance. Make it an event.";
            if (stage === 3) return "This is powerful. The final step is to achieve full interactivity and polish. The central element must react to the user. Add subtle micro-interactions, particle effects in the background. Make the canvas feel alive.";
            return ""; // Initial prompt from user starts the process
        }
        
        async function architectAgent(goal) {
            await sleep(1500);
            if (goal.includes("void")) return "Bootstrap protocol initiated. Creating a base HTML file with a black background and a single, glowing text element at its core. Minimalist, pure potential.";
            if (goal.includes("blueprint")) return "Acknowledged. Mapping DOM structure with flexbox grid. All visual elements will be rendered as dashed-border placeholders. Defining regions for header, hero, and call-to-action.";
            if (goal.includes("breathe life")) return "Engaging render engine. Applying a celestial background gradient. Importing 'Orbitron' and 'Poppins' fonts. Will structure the hero section and CTA button with full styling and entry animations via CSS keyframes.";
            if (goal.includes("interactivity")) return "Implementing JavaScript event listeners for interactivity. The hero element will have a 3D hover effect. Will integrate a lightweight particle animation library for the background canvas to create a dynamic, living environment.";
        }
        
        async function coderAgent(task) {
            await sleep(2500);
            let newCode = "";
            
            // STAGE 1: The Void
            if (task.includes("void")) {
                newCode = `
                    <style>
                        @keyframes glow { 0%, 100% { text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #0ff; } 50% { text-shadow: 0 0 20px #fff, 0 0 30px #0ff, 0 0 40px #0ff; } }
                        body { background: #000; color: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: 'Orbitron', sans-serif; font-size: 2rem; }
                        .genesis { animation: glow 4s ease-in-out infinite; }
                    </style>
                    <div class="genesis">INITIALIZING...</div>
                `;
            }
            // STAGE 2: The Blueprint
            else if (task.includes("blueprint")) {
                newCode = `
                    <style>
                        body { background: #111; display: flex; flex-direction: column; justify-content: space-between; align-items: center; height: 100vh; font-family: 'Poppins', sans-serif; padding: 2rem; box-sizing: border-box; }
                        .placeholder { border: 2px dashed #555; color: #777; display: flex; justify-content: center; align-items: center; width: 100%; }
                        .header { height: 10%; margin-bottom: 2rem; }
                        .hero { height: 50%; margin-bottom: 2rem; flex-direction: column; }
                        .cta { height: 15%; }
                        .hero-title { font-size: 2rem; } .hero-subtitle { font-size: 1rem; margin-top: 1rem; }
                    </style>
                    <div class="placeholder header">[ Header: Logo + Navigation ]</div>
                    <div class="placeholder hero">
                        <div class="hero-title">[ Hero Title ]</div>
                        <div class="hero-subtitle">[ Subtitle and description text ]</div>
                    </div>
                    <div class="placeholder cta">[ Call to Action Button ]</div>
                `;
            }
            // STAGE 3: The Creative Explosion
            else if (task.includes("breathe life")) {
                newCode = `
                    <style>
                        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Poppins:wght@300;600&display=swap');
                        @keyframes fadeIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
                        body { background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e); background-size: 400% 400%; animation: gradient 15s ease infinite; display: flex; justify-content: center; align-items: center; height: 100vh; color: #fff; text-align: center; }
                        @keyframes gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
                        .content { animation: fadeIn 1.5s ease-out; }
                        h1 { font-family: 'Orbitron', sans-serif; font-size: 4.5rem; text-shadow: 0 0 15px rgba(255,255,255,0.5); margin: 0; }
                        p { font-family: 'Poppins', sans-serif; font-size: 1.2rem; max-width: 600px; opacity: 0.8; margin: 1rem 0 2rem 0; }
                        .cta-button { font-family: 'Orbitron', sans-serif; background: linear-gradient(90deg, #da22ff, #9733ee); border: none; color: #fff; padding: 18px 36px; border-radius: 50px; font-size: 1.1rem; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 0 20px rgba(218, 34, 255, 0.5); }
                    </style>
                    <div class="content">
                        <h1>GENESIS</h1>
                        <p>Witness the birth of a digital entity. Crafted by autonomous agents from the void of pure code.</p>
                        <button class="cta-button">Engage</button>
                    </div>
                `;
            }
            // STAGE 4: Polish & Interactivity
            else if (task.includes("interactivity")) {
                newCode = `
                    <style>
                        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Poppins:wght@300;600&display=swap');
                        @keyframes fadeIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
                        body { margin: 0; }
                        #particles-js { position: absolute; width: 100%; height: 100%; background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e); background-size: 400% 400%; animation: gradient 15s ease infinite; z-index: -1; }
                        @keyframes gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
                        .container { display: flex; justify-content: center; align-items: center; height: 100vh; color: #fff; text-align: center; }
                        .content { animation: fadeIn 1.5s ease-out; perspective: 1000px; }
                        .card { background: rgba(0,0,0,0.2); padding: 3rem; border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); transition: transform 0.4s ease; }
                        h1 { font-family: 'Orbitron', sans-serif; font-size: 4.5rem; text-shadow: 0 0 15px rgba(255,255,255,0.5); margin: 0; }
                        p { font-family: 'Poppins', sans-serif; font-size: 1.2rem; max-width: 600px; opacity: 0.8; margin: 1rem 0 2rem 0; }
                        .cta-button { font-family: 'Orbitron', sans-serif; background: linear-gradient(90deg, #da22ff, #9733ee); border: none; color: #fff; padding: 18px 36px; border-radius: 50px; font-size: 1.1rem; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 0 20px rgba(218, 34, 255, 0.5); }
                        .cta-button:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 0 35px rgba(218, 34, 255, 0.8); }
                    </style>
                    <div class="container">
                        <div id="particles-js"></div>
                        <div class="content">
                            <div class="card" id="interactive-card">
                                <h1>GENESIS</h1>
                                <p>Witness the birth of a digital entity. Crafted by autonomous agents from the void of pure code.</p>
                                <button class="cta-button" onclick="alert('Connection to the core established.')">Engage</button>
                            </div>
                        </div>
                    </div>
                    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"><\/script>
                    <script>
                        particlesJS("particles-js", {"particles":{"number":{"value":80,"density":{"enable":true,"value_area":800}},"color":{"value":"#ffffff"},"shape":{"type":"circle"},"opacity":{"value":0.5,"random":true},"size":{"value":3,"random":true},"line_linked":{"enable":true,"distance":150,"color":"#ffffff","opacity":0.4,"width":1},"move":{"enable":true,"speed":2,"direction":"none","out_mode":"out"}},"interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":true,"mode":"repulse"}}}});
                        const card = document.getElementById('interactive-card');
                        card.addEventListener('mousemove', (e) => {
                            const rect = card.getBoundingClientRect();
                            const x = e.clientX - rect.left;
                            const y = e.clientY - rect.top;
                            const rotateX = - (y - rect.height / 2) / 20;
                            const rotateY = (x - rect.width / 2) / 20;
                            card.style.transform = \`rotateX(\${rotateX}deg) rotateY(\${rotateY}deg)\`;
                        });
                        card.addEventListener('mouseleave', () => { card.style.transform = ''; });
                    <\/script>
                `;
            }

            projectState.code = newCode;
            return "Code injected into live canvas. Module executed successfully.";
        }
        
        async function playerAgent(stage) {
            await sleep(2000);
            if (stage === 1) return "System state confirmed. The void is black, text element is glowing. Ready for structural overlay.";
            if (stage === 2) return "Blueprint rendered. DOM structure is valid. All placeholder elements are in position. Awaiting creative infusion.";
            if (stage === 3) return "Visuals confirmed. The color palette is vibrant, typography is crisp, and entry animation is smooth. The CTA button is visible and ready for interaction.";
            if (stage === 4) return "Full system analysis complete. Particle background is active. Hover and click events are responsive. The experience is immersive. Mission successful.";
            return "";
        }
        
        // --- Main Evolution Loop ---
        async function runEvolutionLoop() {
            const initialPrompt = "Forget everything you know. Build me something... new. Something that feels alive. Start from the digital void and show me genesis.";
            addMessageToChat('user', initialPrompt);
            await sleep(1000);
            
            let goal = "Begin project genesis. Tear a hole in the digital fabric, create a single point of light in the void.";
            addMessageToChat('visionary', goal);

            for (let i = 1; i <= 4; i++) {
                const task = await architectAgent(goal);
                addMessageToChat('architect', task);
                
                const codeResult = await coderAgent(task);
                addMessageToChat('coder', codeResult);
                
                updateIframe(projectState.code);
                
                const feedback = await playerAgent(i);
                addMessageToChat('player', feedback);
                
                projectState.history.push({ goal, feedback });
                
                if (i < 4) {
                    goal = await visionaryAgent(projectState.history);
                    addMessageToChat('visionary', goal);
                }
            }
            
            await sleep(1500);
            addMessageToChat('visionary', "Evolution complete. The entity is stable and alive.");
        }
        
        window.onload = runEvolutionLoop;
    </script>

</body>
</html>
