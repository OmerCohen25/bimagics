<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×“××• ×¡×•×¤×™ - ×‘×•×˜ ×ª××•× ×•×ª AI ×¢× ×—×‘×™×œ×•×ª</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;700&display=swap');
        
        :root {
            --whatsapp-bg: #e5ddd5;
            --header-bg: #008069;
            --user-bubble: #dcf8c6;
            --bot-bubble: #ffffff;
            --phone-frame: #111b21;
            --action-color: #25d366;
            --action-color-hover: #128c7e;
            --secondary-action-color: #075e54;
        }

        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden;
        }

        body {
            font-family: 'Heebo', sans-serif;
            background-color: #f0f2f5;
            display: grid;
            place-items: center;
            height: 100svh;
            max-height: 100vh; /* Ensure it doesn't exceed viewport height */
            direction: rtl;
        }

        .phone-mockup {
            width: 390px;
            max-width: 95vw;
            height: 95svh;
            max-height: 850px;
            background-color: var(--phone-frame);
            border-radius: 40px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.35);
            padding: 18px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        .screen {
            background-color: var(--whatsapp-bg);
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAABZohJdAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABtSURBVHja7cEBDQAAAMKg909tDwcUAAAAAAB8Dc2AARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARgYgAEA92sDxwTpJ8YAAAAASUVORK5CYII=");
            flex-grow: 1;
            border-radius: 22px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        .header {
            background-color: var(--header-bg);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            flex-shrink: 0;
            z-index: 10;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #ccc;
            margin-left: 15px;
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Google_Gemini_logo.svg/1200px-Google_Gemini_logo.svg.png');
            background-size: cover;
            background-position: center;
        }

        .chat-info .name { font-weight: 500; }
        .chat-info .status { font-size: 0.8em; opacity: 0.8; }

        .chat-window {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .message {
            max-width: 85%;
            padding: 8px 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            position: relative;
            box-shadow: 0 1px 1px rgba(0,0,0,0.1);
            opacity: 0;
            transform: translateY(10px);
            animation: fadeIn 0.5s forwards;
        }

        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

        .message.bot { background-color: var(--bot-bubble); align-self: flex-start; border-top-left-radius: 0; }
        .message.user { background-color: var(--user-bubble); align-self: flex-end; border-top-right-radius: 0; }
        .message img { max-width: 100%; border-radius: 6px; margin-top: 5px; display: block; }
        
        .image-container { position: relative; cursor: pointer; }
        
        .watermark {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%) rotate(-20deg);
            color: rgba(255, 0, 0, 0.6); font-size: 2.2em; font-weight: 900;
            pointer-events: none; text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
            -webkit-text-stroke: 1px rgba(0,0,0,0.2);
        }

        .packages-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }
        .package-button {
            background-color: var(--secondary-action-color);
            color: white; border: none; padding: 12px 15px;
            border-radius: 8px; font-weight: bold; cursor: pointer;
            text-align: right; font-size: 1em; transition: background-color 0.2s;
            display: block;
        }
        .package-button:hover { background-color: var(--header-bg); }
        .package-button .price { font-size: 0.9em; opacity: 0.8; }

        .input-area {
            background-color: #f0f2f5; padding: 10px; display: flex;
            align-items: center; flex-shrink: 0; border-top: 1px solid #ddd;
        }
        .input-box {
            flex-grow: 1; background-color: white; border-radius: 20px;
            padding: 8px 15px; border: 2px solid transparent; transition: all 0.3s;
        }
        .action-button {
            width: 45px; height: 45px; border-radius: 50%; border: none;
            margin: 0 5px; display: flex; justify-content: center; align-items: center;
            cursor: pointer; background-color: var(--header-bg); color: white;
            font-size: 20px; transition: all 0.3s;
        }
        
        .pulsate-glow { animation: pulsate 2s infinite; }
        @keyframes pulsate {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 10px 15px rgba(37, 211, 102, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }
        .input-box.pulsate-glow { border: 2px solid var(--action-color); }
    </style>
</head>
<body>
    <div class="phone-mockup">
        <div class="screen">
            <div class="header">
                <div class="avatar"></div>
                <div class="chat-info">
                    <div class="name">AI Image Bot</div>
                    <div class="status">××§×•×•×Ÿ</div>
                </div>
            </div>
            <div class="chat-window" id="chatWindow"></div>
            <div class="input-area">
                <button class="action-button" id="attachBtn" title="×¦×¨×£ ×ª××•× ×”">ğŸ“</button>
                <input type="text" class="input-box" id="textInput" placeholder="×›×ª×•×‘ ×”×•×“×¢×”..." readonly>
                <button class="action-button" id="sendBtn" title="×©×œ×—">â¤</button>
            </div>
        </div>
    </div>

    <script>
        const gameState = {
            imageCredits: 2,
            awaitingImage: false,
            awaitingText: false,
            currentScenario: 0,
        };

        const dom = {
            chatWindow: document.getElementById('chatWindow'),
            attachBtn: document.getElementById('attachBtn'),
            sendBtn: document.getElementById('sendBtn'),
            textInput: document.getElementById('textInput'),
        };

        // Images hosted on ImgBB - guaranteed to work
        const scenarios = [
            {
                userImg: "https://i.ibb.co/L5dDBM5/pexels-eberhard-grossgasteiger-1624438.jpg",
                userText: "×”×¤×•×š ××ª ×”×ª××•× ×” ×”×–×• ×œ×¡×¦× ×ª ×œ×™×œ×” ×¢× ×™×¨×— ××œ×",
                botImg: "https://i.ibb.co/GHY0G6p/pexels-eberhard-grossgasteiger-1624438-night.jpg"
            },
            {
                userImg: "https://i.ibb.co/p1Ytq0D/pexels-alizee-marchand-931018.jpg",
                userText: "×ª×•×¡×™×¤×™ ×¡×¤×™× ×ª ×¤×™×¨××˜×™× ×©×˜×” ×‘××™×",
                botImg: "https://i.ibb.co/3cq6p6s/pexels-alizee-marchand-931018-pirate.jpg"
            },
            {
                userImg: "https://i.ibb.co/58FvX7k/pexels-jess-loiterton-4321077.jpg",
                userText: "×ª×©× ×™ ××ª ×”×¡×’× ×•×Ÿ ×œ×¦×™×•×¨ ×× ×™××” ×™×¤× ×™",
                botImg: "https://i.ibb.co/Q8Qf7C0/pexels-jess-loiterton-4321077-anime.jpg"
            },
            {
                userImg: "https://i.ibb.co/8YnK4hP/pexels-jaime-reimer-1528641.jpg",
                userText: "×”×•×¡×£ ×©×‘×™×œ ×©×œ ×›×•×›×‘×™× × ×•×¤×œ×™× ×‘×©××™×™×",
                botImg: "https://i.ibb.co/7j550p8/pexels-jaime-reimer-1528641-stars.jpg"
            },
            {
                userImg: "https://i.ibb.co/2Z5qfL6/pexels-andrea-piacquadio-845451.jpg",
                userText: "×”×¤×•×š ××ª ×”×¨×§×¢ ×œ×¢×™×¨ ×¢×ª×™×“× ×™×ª ×‘×¡×’× ×•×Ÿ ×¡×™×™×‘×¨×¤×× ×§",
                botImg: "https://i.ibb.co/c1t2x1h/pexels-andrea-piacquadio-845451-cyber.jpg"
            }
        ];
        
        function delay(ms) { return new Promise(resolve => setTimeout(resolve, ms)); }
        
        function scrollToBottom() { dom.chatWindow.scrollTop = dom.chatWindow.scrollHeight; }

        async function appendMessage(sender, content) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', sender);
            messageDiv.innerHTML = content;
            dom.chatWindow.appendChild(messageDiv);
            scrollToBottom();
            await delay(100);
        }

        async function showTyping(duration = 2000) {
            const indicator = document.createElement('div');
            indicator.classList.add('message', 'bot');
            indicator.innerHTML = `<span>.</span><span>.</span><span>.</span>`;
            dom.chatWindow.appendChild(indicator);
            scrollToBottom();
            await delay(duration);
            indicator.remove();
        }

        function setInputState(state) {
            ['attachBtn', 'textInput', 'sendBtn'].forEach(el => el.classList.remove('pulsate-glow'));
            if (state === 'awaitingImage') {
                dom.textInput.placeholder = '×œ×—×¥ ×¢×œ ğŸ“ ×›×“×™ ×œ×©×œ×•×— ×ª××•× ×”...';
                dom.textInput.readOnly = true;
                gameState.awaitingImage = true;
                gameState.awaitingText = false;
                dom.attachBtn.classList.add('pulsate-glow');
            } else if (state === 'awaitingText') {
                dom.textInput.placeholder = `×œ×“×•×’××”: "${scenarios[gameState.currentScenario].userText}"`;
                dom.textInput.readOnly = false;
                gameState.awaitingImage = false;
                gameState.awaitingText = true;
                dom.textInput.classList.add('pulsate-glow');
                dom.sendBtn.classList.add('pulsate-glow');
                dom.textInput.focus();
            } else { // Idle
                dom.textInput.placeholder = '×”×‘×•×˜ ××¢×‘×“...';
                dom.textInput.readOnly = true;
                gameState.awaitingImage = false;
                gameState.awaitingText = false;
            }
        }

        async function handleSend() {
            if (!gameState.awaitingText) return;
            const userText = dom.textInput.value || scenarios[gameState.currentScenario].userText;
            await appendMessage('user', userText);
            dom.textInput.value = '';
            setInputState('idle');
            await processBotResponse();
        }
        
        async function processBotResponse() {
            await showTyping(2500);
            
            const currentScenario = scenarios[gameState.currentScenario];
            
            if (gameState.imageCredits <= 0) {
                // Paywall Logic
                await appendMessage('bot', `
                    <div class="image-container">
                        <img src="${currentScenario.botImg}" alt="Watermarked Image">
                        <div class="watermark">×“×•×’××”</div>
                    </div>
                `);
                await delay(500);
                await appendMessage('bot', '××•×¤×¡! × ×’××¨×• ×œ×š ×”×§×¨×“×™×˜×™×. ×›×“×™ ×œ×§×‘×œ ××ª ×”×ª××•× ×” ×”×–×• ×•×œ×™×¦×•×¨ ×¢×•×“, ×‘×—×¨ ××—×ª ××”×—×‘×™×œ×•×ª:');
                
                const packagesHtml = `
                    <div class="packages-container">
                        <button class="package-button" data-credits="10"><b>10 ×ª××•× ×•×ª</b> <span class="price">- 9 â‚ª</span></button>
                        <button class="package-button" data-credits="30"><b>30 ×ª××•× ×•×ª</b> <span class="price">- 19 â‚ª</span></button>
                        <button class="package-button" data-credits="100"><b>100 ×ª××•× ×•×ª</b> <span class="price">- 49 â‚ª</span></button>
                    </div>
                `;
                await appendMessage('bot', packagesHtml);
                document.querySelectorAll('.package-button').forEach(button => {
                    button.addEventListener('click', () => handlePayment(parseInt(button.dataset.credits)));
                });
            } else {
                // Standard Logic
                await appendMessage('bot', `×‘×˜×—, ×‘×‘×§×©×”:
                    <img src="${currentScenario.botImg}" alt="Processed Image">
                `);
                await delay(500);
                await appendMessage('bot', `× ×”×“×¨! × ×©××¨ ×œ×š ×¢×•×“ <b>${gameState.imageCredits}</b> ×§×¨×“×™×˜${gameState.imageCredits > 1 ? '×™×' : ''}.`);
                setInputState('awaitingImage');
                gameState.currentScenario = (gameState.currentScenario + 1) % scenarios.length;
            }
        }

        async function handlePayment(creditsToAdd) {
            document.querySelectorAll('.package-button').forEach(b => b.disabled = true);
            await appendMessage('user', `×¨×›×©×ª×™ ×—×‘×™×œ×” ×©×œ ${creditsToAdd} ×ª××•× ×•×ª.`);
            await showTyping(3000);

            gameState.imageCredits += creditsToAdd;
            const currentScenario = scenarios[gameState.currentScenario];
            
            await appendMessage('bot', 'âœ… ×ª×•×“×” ×¨×‘×”! ×”×¨×›×™×©×” ×‘×•×¦×¢×” ×‘×”×¦×œ×—×”.');
            await delay(800);
            await appendMessage('bot', `×”× ×” ×”×ª××•× ×” ×©×œ×š ×œ×œ× ×¡×™××Ÿ ×”××™×:
                    <img src="${currentScenario.botImg}" alt="Clean Image">
                `);
            await delay(800);
            await appendMessage('bot', `××¦×•×™×Ÿ! × ×•×¡×¤×• ×œ×š ${creditsToAdd} ×§×¨×“×™×˜×™×. ×¡×”"×› ×™×© ×œ×š <b>${gameState.imageCredits}</b> ×§×¨×“×™×˜×™×. ××¤×©×¨ ×œ×”××©×™×š ×œ×™×¦×™×¨×” ×”×‘××”.`);
            
            gameState.currentScenario = (gameState.currentScenario + 1) % scenarios.length;
            setInputState('awaitingImage');
        }
        
        async function handleAttach() {
            if (!gameState.awaitingImage) return;
            
            if (gameState.imageCredits > 0) {
                 gameState.imageCredits--;
                 const currentScenario = scenarios[gameState.currentScenario];
                 await appendMessage('user', `<img src="${currentScenario.userImg}" alt="User Image">`);
                 setInputState('awaitingText');
            } else {
                await processBotResponse(); // Trigger paywall directly if no credits
            }
        }
        
        async function startDemo() {
            await showTyping(1500);
            await appendMessage('bot', '×©×œ×•×! ğŸ‘‹ ×× ×™ ×‘×•×˜ ×¢×¨×™×›×ª ×ª××•× ×•×ª ××‘×•×¡×¡ AI.');
            await delay(1200);
            await appendMessage('bot', `×›×“×™ ×œ×”×ª×—×™×œ, ×©×œ×— ×œ×™ ×ª××•× ×” (×œ×—×¥ ×¢×œ ğŸ“) ×•××– ×›×ª×•×‘ ××” ×ª×¨×¦×” ×œ×©× ×•×ª. ×™×© ×œ×š <b>${gameState.imageCredits} ×§×¨×“×™×˜×™×</b> ×—×™× × ×œ×”×ª× ×¡×•×ª!`);
            setInputState('awaitingImage');
        }

        // --- Event Listeners & Initialization ---
        dom.attachBtn.addEventListener('click', handleAttach);
        dom.sendBtn.addEventListener('click', handleSend);
        dom.textInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleSend();
        });
        window.onload = startDemo;
    </script>
</body>
</html>
