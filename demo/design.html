<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×“××• ××©×•×¤×¨ - ×‘×•×˜ ×•×•×˜×¡××¤ AI</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;700&display=swap');
        
        :root {
            --whatsapp-bg: #e5ddd5;
            --header-bg: #008069;
            --user-bubble: #dcf8c6;
            --bot-bubble: #ffffff;
            --phone-frame: #111b21;
            --action-color: #25d366;
            --action-color-hover: #128c7e;
        }

        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden; /* Prevent scrolling on the body */
        }

        body {
            font-family: 'Heebo', sans-serif;
            background-color: #f0f2f5;
            display: grid;
            place-items: center;
            height: 100svh; /* Use small viewport height to fit screen */
            direction: rtl;
        }

        .phone-mockup {
            width: 390px;
            max-width: 95vw;
            height: 95svh; /* Fit within the viewport */
            max-height: 850px;
            background-color: var(--phone-frame);
            border-radius: 40px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.35);
            padding: 18px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        .screen {
            background-color: var(--whatsapp-bg);
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAABZohJdAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABtSURBVHja7cEBDQAAAMKg909tDwcUAAAAAAB8Dc2AARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARiAARgYgAEA92sDxwTpJ8YAAAAASUVORK5CYII=");
            flex-grow: 1;
            border-radius: 22px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        .header {
            background-color: var(--header-bg);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            flex-shrink: 0;
            z-index: 10;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #ccc;
            margin-left: 15px;
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Google_Gemini_logo.svg/1200px-Google_Gemini_logo.svg.png');
            background-size: cover;
            background-position: center;
        }

        .chat-info .name { font-weight: 500; }
        .chat-info .status { font-size: 0.8em; opacity: 0.8; }

        .chat-window {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .message {
            max-width: 80%;
            padding: 8px 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            position: relative;
            box-shadow: 0 1px 1px rgba(0,0,0,0.1);
            opacity: 0;
            transform: translateY(10px);
            animation: fadeIn 0.5s forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.bot { background-color: var(--bot-bubble); align-self: flex-start; border-top-left-radius: 0; }
        .message.user { background-color: var(--user-bubble); align-self: flex-end; border-top-right-radius: 0; }
        .message img { max-width: 100%; border-radius: 6px; margin-top: 5px; display: block; }
        
        .image-container { position: relative; cursor: pointer; }
        
        .watermark {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) rotate(-20deg);
            color: rgba(255, 0, 0, 0.6);
            font-size: 2.2em;
            font-weight: 900;
            pointer-events: none;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
            -webkit-text-stroke: 1px rgba(0,0,0,0.2);
        }

        .pay-button {
            background-color: var(--action-color);
            color: white; border: none; padding: 10px 15px;
            border-radius: 20px; font-weight: bold; cursor: pointer;
            margin-top: 10px; display: block; text-align: center;
            font-size: 1em; transition: background-color 0.2s;
        }
        .pay-button:hover { background-color: var(--action-color-hover); }

        .input-area {
            background-color: #f0f2f5; padding: 10px;
            display: flex; align-items: center;
            flex-shrink: 0; border-top: 1px solid #ddd;
        }

        .input-box {
            flex-grow: 1; background-color: white;
            border-radius: 20px; padding: 8px 15px;
            border: 2px solid transparent; transition: all 0.3s;
        }

        .action-button {
            width: 45px; height: 45px; border-radius: 50%;
            border: none; margin: 0 5px; display: flex;
            justify-content: center; align-items: center;
            cursor: pointer; background-color: var(--header-bg);
            color: white; font-size: 20px; transition: all 0.3s;
        }
        
        /* Pulsating Animation */
        .pulsate-glow {
            animation: pulsate 2s infinite;
        }
        @keyframes pulsate {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 10px 15px rgba(37, 211, 102, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }
        .input-box.pulsate-glow { border: 2px solid var(--action-color); }
    </style>
</head>
<body>

    <div class="phone-mockup">
        <div class="screen">
            <div class="header">
                <div class="avatar"></div>
                <div class="chat-info">
                    <div class="name">AI Image Bot</div>
                    <div class="status">××§×•×•×Ÿ</div>
                </div>
            </div>
            <div class="chat-window" id="chatWindow"></div>
            <div class="input-area">
                <button class="action-button" id="attachBtn" title="×¦×¨×£ ×ª××•× ×”">ğŸ“</button>
                <input type="text" class="input-box" id="textInput" placeholder="×›×ª×•×‘ ×”×•×“×¢×”..." readonly>
                <button class="action-button" id="sendBtn" title="×©×œ×—">â¤</button>
            </div>
        </div>
    </div>

    <script>
        // --- State Management ---
        const gameState = {
            imageCount: 0,
            isPaid: false,
            awaitingImage: false,
            awaitingText: false,
            currentScenario: 0,
        };

        // --- DOM Elements ---
        const chatWindow = document.getElementById('chatWindow');
        const attachBtn = document.getElementById('attachBtn');
        const sendBtn = document.getElementById('sendBtn');
        const textInput = document.getElementById('textInput');

        // --- Diverse Image Scenarios ---
        const scenarios = [
            {
                userImg: "https://images.pexels.com/photos/167699/pexels-photo-167699.jpeg?auto=compress&cs=tinysrgb&w=600",
                userText: "×ª×”×¤×•×š ××ª ×”×ª××•× ×” ×”×–×• ×œ×¡×¦× ×ª ×œ×™×œ×” ×§×¡×•××”",
                botImg: "https://images.pexels.com/photos/305821/pexels-photo-305821.jpeg?auto=compress&cs=tinysrgb&w=600"
            },
            {
                userImg: "https://images.pexels.com/photos/931018/pexels-photo-931018.jpeg?auto=compress&cs=tinysrgb&w=600",
                userText: "×ª×•×¡×™×¤×™ ×¡×¤×™× ×ª ×¤×™×¨××˜×™× ×‘××™×",
                botImg: "https://i.imgur.com/uG9XJt2.jpeg" // Custom edit for demo
            },
            {
                userImg: "https://images.pexels.com/photos/36717/amazing-animal-beautiful-beautifull.jpg?auto=compress&cs=tinysrgb&w=600",
                userText: "×ª×©× ×™ ××ª ×”×¡×’× ×•×Ÿ ×œ×¦×™×•×¨ ×•××Ÿ ×’×•×š",
                botImg: "https://i.imgur.com/8QWvY3A.jpeg" // Custom edit for demo
            },
             {
                userImg: "https://images.pexels.com/photos/1528641/pexels-photo-1528641.jpeg?auto=compress&cs=tinysrgb&w=600",
                userText: "×”×•×¡×£ ×©×‘×™×œ ×©×œ ×›×•×›×‘×™× × ×•×¤×œ×™× ×‘×©××™×™×",
                botImg: "https://i.imgur.com/7b7f9Ua.jpeg" // Custom edit for demo
            },
            {
                userImg: "https://images.pexels.com/photos/1191531/pexels-photo-1191531.jpeg?auto=compress&cs=tinysrgb&w=600",
                userText: "×”×¤×•×š ××ª ×”×¨×§×¢ ×œ×¢×™×¨ ×¢×ª×™×“× ×™×ª",
                botImg: "https://i.imgur.com/bW3g7u0.jpeg" // Custom edit for demo
            }
        ];
        
        // --- Core Functions ---
        
        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        function scrollToBottom() {
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        async function appendMessage(sender, content, instant = false) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', sender);
            messageDiv.innerHTML = content;
            if (instant) {
                messageDiv.style.animation = 'none';
                messageDiv.style.opacity = '1';
                messageDiv.style.transform = 'translateY(0)';
            }
            chatWindow.appendChild(messageDiv);
            scrollToBottom();
            await delay(100); // Small delay for animation
        }

        async function showTyping(duration = 2000) {
            const indicator = document.createElement('div');
            indicator.classList.add('message', 'bot');
            indicator.innerHTML = `<div class="typing-indicator"><span>.</span><span>.</span><span>.</span></div>`;
            chatWindow.appendChild(indicator);
            scrollToBottom();
            
            await delay(duration);
            indicator.remove();
        }

        function setInputState(state) {
            attachBtn.classList.remove('pulsate-glow');
            textInput.classList.remove('pulsate-glow');
            sendBtn.classList.remove('pulsate-glow');

            if (state === 'awaitingImage') {
                textInput.placeholder = '×œ×—×¥ ×¢×œ ğŸ“ ×›×“×™ ×œ×©×œ×•×— ×ª××•× ×”...';
                textInput.readOnly = true;
                gameState.awaitingImage = true;
                gameState.awaitingText = false;
                attachBtn.classList.add('pulsate-glow');
            } else if (state === 'awaitingText') {
                const currentScenario = scenarios[gameState.currentScenario];
                textInput.placeholder = `×œ×“×•×’××”: "${currentScenario.userText}"`;
                textInput.readOnly = false;
                gameState.awaitingImage = false;
                gameState.awaitingText = true;
                textInput.classList.add('pulsate-glow');
                sendBtn.classList.add('pulsate-glow');
                textInput.focus();
            } else { // Idle
                textInput.placeholder = '×”×‘×•×˜ ××¢×‘×“...';
                textInput.readOnly = true;
                gameState.awaitingImage = false;
                gameState.awaitingText = false;
            }
        }

        async function handleSend() {
            if (!gameState.awaitingText) return;
            
            const currentScenario = scenarios[gameState.currentScenario];
            const userText = textInput.value || currentScenario.userText;
            
            await appendMessage('user', userText);
            textInput.value = '';
            setInputState('idle');
            await processBotResponse();
        }
        
        async function processBotResponse() {
            await showTyping(2500);
            
            const currentScenario = scenarios[gameState.currentScenario];
            
            if (gameState.imageCount >= 3 && !gameState.isPaid) {
                // Paywall Logic
                await appendMessage('bot', `
                    <div class="image-container">
                        <img src="${currentScenario.botImg}" alt="Processed Image with Watermark">
                        <div class="watermark">×“×•×’××”</div>
                    </div>
                `);
                await delay(500);
                await appendMessage('bot', '×”×’×¢×ª ×œ××’×‘×œ×” ×”×—×™× ××™×ª. ×›×“×™ ×œ×§×‘×œ ××ª ×”×ª××•× ×” ×”×–×• ×œ×œ× ×¡×™××Ÿ ×”××™× ×•×œ×™×¦×•×¨ ×¢×•×“, ×™×© ×œ×‘×¦×¢ ×ª×©×œ×•×.');
                await delay(500);
                const payButtonHtml = '<button class="pay-button" id="payBtn">×ª×©×œ×•× ×××•×‘×˜×— (10 â‚ª)</button>';
                await appendMessage('bot', payButtonHtml);
                document.getElementById('payBtn').addEventListener('click', handlePayment);
            } else {
                // Standard Logic
                await appendMessage('bot', `×‘×˜×—, ×‘×‘×§×©×”:
                    <img src="${currentScenario.botImg}" alt="Processed Image">
                `);
                 if (gameState.imageCount < 3) {
                     await delay(500);
                     await appendMessage('bot', `×–×• ×”×ª××•× ×” ×”×—×™× ××™×ª ×©×œ×š, ××¡×¤×¨ ${gameState.imageCount} ××ª×•×š 2.`);
                 } else {
                     await delay(500);
                     await appendMessage('bot', '×ª×•×“×” ×©×¨×›×©×ª! ××¤×©×¨ ×œ×”××©×™×š ×œ×™×¦×™×¨×” ×”×‘××”.');
                 }
                setInputState('awaitingImage');
                // Move to next scenario
                gameState.currentScenario = (gameState.currentScenario + 1) % scenarios.length;
            }
        }

        async function handlePayment() {
            await appendMessage('user', '×‘×™×¦×•×¢ ×ª×©×œ×•×...', true);
            await showTyping(3000);

            gameState.isPaid = true; // In real app, this would be set by a webhook
            const currentScenario = scenarios[gameState.currentScenario];
            
            await appendMessage('bot', 'âœ… ×ª×•×“×” ×¨×‘×”! ×”×ª×©×œ×•× ×‘×•×¦×¢ ×‘×”×¦×œ×—×”.');
            await delay(800);
            await appendMessage('bot', `×”× ×” ×”×ª××•× ×” ×©×œ×š, × ×§×™×™×” ××¡×™××Ÿ ×”××™×:
                    <img src="${currentScenario.botImg}" alt="Clean Processed Image">
                `);
            await delay(800);
            await appendMessage('bot', '×¢×›×©×™×• ×—×‘×™×œ×ª ×”×ª××•× ×•×ª ×©×œ×š ×”×ª××¤×¡×”. ××¤×©×¨ ×œ×”×ª×—×™×œ ××—×“×©, ×¤×©×•×˜ ×©×œ×— ×œ×™ ×ª××•× ×” ×•×”×•×¨××”.');
            
            // Reset counter and move to the next visual example
            gameState.imageCount = 0; // Or set to a new limit
            gameState.isPaid = false; // Reset for next paywall cycle
            gameState.currentScenario = (gameState.currentScenario + 1) % scenarios.length;
            setInputState('awaitingImage');
        }
        
        async function handleAttach() {
            if (!gameState.awaitingImage) return;
            
            gameState.imageCount++;
            const currentScenario = scenarios[gameState.currentScenario];
            await appendMessage('user', `
                <img src="${currentScenario.userImg}" alt="User Uploaded Image">
            `);
            setInputState('awaitingText');
        }
        
        // --- Event Listeners & Initialization ---
        attachBtn.addEventListener('click', handleAttach);
        sendBtn.addEventListener('click', handleSend);
        textInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSend();
            }
        });

        async function startDemo() {
            await showTyping(1500);
            await appendMessage('bot', '×©×œ×•×! ğŸ‘‹ ×× ×™ ×‘×•×˜ ×¢×¨×™×›×ª ×ª××•× ×•×ª ××‘×•×¡×¡ AI.');
            await delay(1200);
            await appendMessage('bot', '×©×œ×— ×œ×™ ×ª××•× ×” (×œ×—×¥ ×¢×œ ğŸ“) ×•××– ×›×ª×•×‘ ××” ×ª×¨×¦×” ×œ×©× ×•×ª. 2 ×”×ª××•× ×•×ª ×”×¨××©×•× ×•×ª ×”×Ÿ ×—×™× × ×œ×’××¨×™ ×œ×”×ª× ×¡×•×ª!');
            setInputState('awaitingImage');
        }

        window.onload = startDemo;
    </script>

</body>
</html>
