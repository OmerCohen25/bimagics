<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מחולל חוזה שכירות דיגיטלי - עורך דין חכם</title>
    
    <!-- טעינת ספריות חיצוניות (React, Tailwind, Babel) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- גופנים -->
    <link href="https://fonts.googleapis.com/css2?family=David+Libre:wght@400;500;700&family=Heebo:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Heebo', sans-serif;
        }
        .contract-font {
            font-family: 'David Libre', 'Frank Ruhl Libre', serif;
        }
        
        /* התאמות להדפסה */
        @media print {
            @page { 
                margin: 20mm; /* שוליים תקניים למסמך A4 */
                size: A4; 
            }
            body { 
                background: white; 
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
                font-size: 12pt;
                line-height: 1.5;
            }
            .no-print { 
                display: none !important; 
            }
            .print-only { 
                display: block !important; 
            }
            /* איפוס הקונטיינרים החיצוניים בהדפסה */
            #root, .flex, .flex-col, .lg\:flex-row {
                display: block !important;
                height: auto !important;
                overflow: visible !important;
            }
            .bg-gray-200, .bg-white, .shadow-xl, .shadow-2xl {
                background: transparent !important;
                box-shadow: none !important;
                border: none !important;
            }
            /* הקונטיינר של החוזה עצמו */
            .print-container {
                width: 100% !important;
                max-width: none !important;
                margin: 0 !important;
                padding: 0 !important; /* השוליים מטופלים ע"י @page */
                min-height: auto !important;
            }
            /* מניעת שבירת סעיפים באמצע */
            li, p, .signature-block {
                page-break-inside: avoid;
            }
            .break-before-page { 
                page-break-before: always; 
            }
            /* ביטול עיצוב שדות קלט בהדפסה להיראות כטקסט רגיל */
            input, select {
                border: none !important;
                background: transparent !important;
                padding: 0 !important;
                margin: 0 !important;
                font-family: inherit !important;
                font-size: inherit !important;
                font-weight: bold !important;
                color: black !important;
                width: auto !important;
                display: inline-block !important;
                appearance: none !important;
                -webkit-appearance: none !important;
            }
            /* הסתרת placeholders בהדפסה */
            input::placeholder {
                color: transparent !important;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- אייקונים (SVG) ---
        const IconPrinter = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>
        );
        const IconFileText = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
        );
        const IconPlus = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        );
        const IconX = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        );

        const SmartContractLawyer = () => {
            // --- ניהול נתונים (State) ---
            const [data, setData] = useState({
                cityOfSigning: "אשקלון",
                dateOfSigning: new Date().toISOString().split('T')[0],
                
                // משכיר
                landlordName: "ישראל דרעי",
                landlordId: "301582425",
                
                // שוכר
                tenantName: "אריאל ותמר סולימאני",
                tenantId: "", 
                
                // הנכס
                propertyStreet: "אפיקי מים 16",
                propertyCity: "אשקלון",
                propertyDetails: "קומה שניה, דירה 6, דירת 5 חדרים",
                
                // תקופת השכירות
                entryDate: "2026-01-10",
                endDate: "2026-12-31",
                
                // כספים
                rentAmount: "4,800",
                paymentDay: "15",
                
                // אופציה
                optionMonths: "12",
                
                // ביטחונות
                securityDeposit: "25,000",
            });

            const [inventory, setInventory] = useState([
                "מזגן בכל חדר",
                "מזגן מיני מרכזי במטבח ובסלון",
                "מקלחונים",
                "גופי תאורה",
                "סורגים בחלונות"
            ]);

            const [newItem, setNewItem] = useState("");

            // --- לוגיקה ---
            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setData(prev => ({ ...prev, [name]: value }));
            };

            const addItem = () => {
                if (newItem.trim()) {
                    setInventory([...inventory, newItem]);
                    setNewItem("");
                }
            };

            const removeItem = (index) => {
                const newInv = [...inventory];
                newInv.splice(index, 1);
                setInventory(newInv);
            };

            const handlePrint = () => {
                window.print();
            };

            const formatDateHebrew = (dateStr) => {
                if (!dateStr) return "___";
                const d = new Date(dateStr);
                return d.toLocaleDateString('he-IL', { day: 'numeric', month: 'long', year: 'numeric' });
            };

            return (
                <div className="min-h-screen bg-gray-50 flex flex-col lg:flex-row font-sans text-gray-900 rtl" dir="rtl">
                
                    {/* ==================== עורך הנתונים (מוסתר בהדפסה) ==================== */}
                    <div className="w-full lg:w-1/3 bg-white border-l border-gray-200 shadow-xl overflow-y-auto h-auto lg:h-screen no-print z-20">
                        <div className="p-6 bg-slate-800 text-white sticky top-0 z-10 shadow-md">
                            <h2 className="text-xl font-bold flex items-center gap-2">
                                <IconFileText />
                                עורך חוזה דיגיטלי
                            </h2>
                            <p className="text-slate-300 text-sm mt-1">גרסת HTML עצמאית מלאה</p>
                        </div>

                        <div className="p-6 space-y-8">
                            
                            <section>
                                <h3 className="text-blue-600 font-bold border-b border-blue-100 pb-2 mb-4">פרטי החתימה</h3>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">עיר החתימה</label>
                                        <input type="text" name="cityOfSigning" value={data.cityOfSigning} onChange={handleInputChange} className="w-full mt-1 p-2 border rounded focus:ring-2 ring-blue-500 outline-none" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">תאריך</label>
                                        <input type="date" name="dateOfSigning" value={data.dateOfSigning} onChange={handleInputChange} className="w-full mt-1 p-2 border rounded focus:ring-2 ring-blue-500 outline-none" />
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 className="text-blue-600 font-bold border-b border-blue-100 pb-2 mb-4">הצדדים לחוזה</h3>
                                <div className="space-y-4">
                                    <div className="bg-blue-50 p-3 rounded">
                                        <label className="block text-sm font-bold text-blue-900">המשכיר</label>
                                        <input type="text" name="landlordName" value={data.landlordName} onChange={handleInputChange} className="w-full mt-1 p-2 border rounded mb-2 bg-white" placeholder="שם מלא" />
                                        <input type="text" name="landlordId" value={data.landlordId} onChange={handleInputChange} className="w-full p-2 border rounded bg-white" placeholder="ת.ז" />
                                    </div>
                                    <div className="bg-green-50 p-3 rounded">
                                        <label className="block text-sm font-bold text-green-900">השוכר</label>
                                        <input type="text" name="tenantName" value={data.tenantName} onChange={handleInputChange} className="w-full mt-1 p-2 border rounded mb-2 bg-white" placeholder="שם מלא" />
                                        <input type="text" name="tenantId" value={data.tenantId} onChange={handleInputChange} className="w-full p-2 border rounded bg-white" placeholder="ת.ז" />
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 className="text-blue-600 font-bold border-b border-blue-100 pb-2 mb-4">פרטי הנכס</h3>
                                <div className="space-y-3">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">רחוב ומספר</label>
                                        <input type="text" name="propertyStreet" value={data.propertyStreet} onChange={handleInputChange} className="w-full mt-1 p-2 border rounded" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">עיר</label>
                                        <input type="text" name="propertyCity" value={data.propertyCity} onChange={handleInputChange} className="w-full mt-1 p-2 border rounded" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">תיאור</label>
                                        <input type="text" name="propertyDetails" value={data.propertyDetails} onChange={handleInputChange} className="w-full mt-1 p-2 border rounded" />
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 className="text-blue-600 font-bold border-b border-blue-100 pb-2 mb-4">תקופה ותשלומים</h3>
                                <div className="grid grid-cols-2 gap-4 mb-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">תאריך כניסה</label>
                                        <input type="date" name="entryDate" value={data.entryDate} onChange={handleInputChange} className="w-full mt-1 p-2 border rounded" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">תאריך סיום</label>
                                        <input type="date" name="endDate" value={data.endDate} onChange={handleInputChange} className="w-full mt-1 p-2 border rounded" />
                                    </div>
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">שכירות חודשית (₪)</label>
                                        <input type="text" name="rentAmount" value={data.rentAmount} onChange={handleInputChange} className="w-full mt-1 p-2 border rounded font-bold text-gray-800" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700">יום בחודש לתשלום</label>
                                        <input type="number" name="paymentDay" value={data.paymentDay} onChange={handleInputChange} className="w-full mt-1 p-2 border rounded" />
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 className="text-blue-600 font-bold border-b border-blue-100 pb-2 mb-4">נספח א' - תכולת דירה</h3>
                                <div className="flex gap-2 mb-2">
                                    <input 
                                        type="text" 
                                        value={newItem} 
                                        onChange={(e) => setNewItem(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && addItem()}
                                        placeholder="הוסף פריט..."
                                        className="flex-1 p-2 border rounded text-sm"
                                    />
                                    <button onClick={addItem} className="bg-blue-600 text-white p-2 rounded hover:bg-blue-700 flex items-center justify-center">
                                        <IconPlus />
                                    </button>
                                </div>
                                <ul className="space-y-1 bg-gray-50 p-2 rounded max-h-40 overflow-y-auto">
                                    {inventory.map((item, idx) => (
                                        <li key={idx} className="flex justify-between items-center text-sm bg-white p-2 rounded shadow-sm border">
                                            <span>{idx + 1}. {item}</span>
                                            <button onClick={() => removeItem(idx)} className="text-red-500 hover:text-red-700"><IconX /></button>
                                        </li>
                                    ))}
                                </ul>
                            </section>

                            <button 
                                onClick={handlePrint}
                                className="w-full bg-slate-800 hover:bg-slate-700 text-white py-4 rounded-lg font-bold text-lg shadow-lg flex justify-center items-center gap-2 mt-8"
                            >
                                <IconPrinter />
                                הדפס חוזה / שמור כ-PDF
                            </button>
                        </div>
                    </div>

                    {/* ==================== מסמך החוזה (A4) ==================== */}
                    <div className="flex-1 bg-gray-200 p-8 lg:p-12 overflow-y-auto print:bg-white print:p-0 print:m-0">
                        
                        <div className="print-container max-w-[210mm] mx-auto bg-white shadow-2xl min-h-[297mm] p-[20mm] text-justify text-gray-900 leading-relaxed relative contract-font">
                        
                            {/* כותרת */}
                            <div className="text-center mb-8">
                                <div className="text-xs text-gray-500 absolute top-10 left-10 no-print">תצוגה מקדימה</div>
                                <div className="font-bold mb-2">בס"ד</div>
                                <h1 className="text-3xl font-bold underline mb-4">חוזה שכירות בלתי מוגנת</h1>
                                <p className="text-lg">
                                    שנערך ונחתם ב<span className="font-bold">{data.cityOfSigning}</span> ביום <span className="font-bold">{formatDateHebrew(data.dateOfSigning)}</span>.
                                </p>
                            </div>

                            {/* הצדדים - מבנה Grid ליציבות בהדפסה */}
                            <div className="grid grid-cols-[100px_1fr_120px] gap-4 mb-8 text-lg">
                                {/* משכיר */}
                                <div className="font-bold">בין:</div>
                                <div>
                                    <div className="font-bold">{data.landlordName}</div>
                                    <div>ת.ז. {data.landlordId}</div>
                                    <div className="text-sm text-gray-600">(להלן לשם הקיצור: "בעל הדירה" ו/או "המשכיר")</div>
                                </div>
                                <div className="text-left font-bold">מצד אחד</div>

                                {/* שוכר */}
                                <div className="font-bold mt-4">לבין:</div>
                                <div className="mt-4">
                                    <div className="font-bold">{data.tenantName}</div>
                                    <div>{data.tenantId ? `ת.ז. ${data.tenantId}` : ""}</div>
                                    <div className="text-sm text-gray-600">(להלן יחדיו: "השוכר")</div>
                                </div>
                                <div className="text-left font-bold mt-4">מצד שני</div>
                            </div>

                            {/* מבוא */}
                            <div className="mb-6">
                                <h2 className="text-xl font-bold underline mb-2">מבוא</h2>
                                <p className="mb-2">
                                    הואיל ובעל הדירה הינו בעל הזכויות בדירה בכתובת <span className="font-bold">{data.propertyStreet}, {data.propertyCity}</span>, {data.propertyDetails} (להלן: "הדירה");
                                </p>
                                <p className="mb-2">
                                    והואיל ובעל הדירה מעוניין להשכיר את הדירה לשוכר, והשוכר מעוניין לשכור את הדירה מבעל הדירה בשכירות בלתי מוגנת, בכפוף לתנאים ולהתחייבויות המפורטים בחוזה זה להלן;
                                </p>
                                <p className="font-bold mt-4">לפיכך מוסכם ומותנה בין הצדדים כי:</p>
                            </div>

                            {/* סעיפי החוזה */}
                            <ol className="list-decimal list-outside pr-6 space-y-4">
                                
                                <li>
                                    <strong>הצהרות הצדדים:</strong>
                                    <ul className="list-disc list-outside pr-5 mt-1 space-y-1">
                                        <li>בעל הדירה מצהיר כי הדירה ראויה למגורים ונמסרת כשהיא ריקה, מלבד הפריטים המפורטים בנספח א' לחוזה זה.</li>
                                        <li>השוכר מצהיר כי ראה ובדק את הדירה ומצא אותה במצבה כפי שהיא (As-Is) מתאימה למגורים עבורו.</li>
                                    </ul>
                                </li>

                                <li>
                                    <strong>מטרת השכירות:</strong> השוכר מתחייב כי השימוש בדירה יהיה למטרת מגורים בלבד.
                                </li>

                                <li>
                                    <strong>תקופת השכירות:</strong> תחל ביום <span className="font-bold">{formatDateHebrew(data.entryDate)}</span> ותסתיים ביום <span className="font-bold">{formatDateHebrew(data.endDate)}</span>.
                                </li>

                                <li>
                                    <strong>דמי השכירות:</strong>
                                    <p>
                                        עבור שכירת הדירה ישלם השוכר סך של <span className="font-bold">{data.rentAmount} ₪</span> לחודש.
                                        דמי השכירות ישולמו בכל <span className="font-bold">{data.paymentDay}</span> לחודש עבור החודש השוטף, באמצעות העברה בנקאית/המחאות (מחק את המיותר).
                                    </p>
                                    <p className="mt-1 text-sm text-gray-600">
                                        * זכותו של המשכיר לעדכן את סכום השכירות בתום תקופת השכירות הראשונה, במידה ויחודש החוזה.
                                    </p>
                                </li>

                                <li>
                                    <strong>תקופת האופציה:</strong>
                                    <p>
                                        ניתנת לשוכר אופציה להאריך את השכירות ב-{data.optionMonths} חודשים נוספים, בכפוף למתן הודעה מראש של 90 יום ובכפוף לכך שלא היו הפרות יסודיות של ההסכם. דמי השכירות בתקופת האופציה יסוכמו בין הצדדים בהתאם למחירי השוק.
                                    </p>
                                </li>

                                <li>
                                    <strong>מיסים ותשלומים שוטפים:</strong>
                                    <p>
                                        על השוכר לשלם את כל ההוצאות השוטפות החלות על הדירה, לרבות ארנונה, חשמל, מים, גז, ועד בית וכיוצא באלה. חובה על השוכר להעביר את חשבונות החשמל, המים והארנונה על שמו תוך 10 ימים מכניסתו לדירה.
                                    </p>
                                </li>

                                <li>
                                    <strong>שמירה על הדירה:</strong>
                                    <p>
                                        השוכר מתחייב להחזיר את הדירה בסיום השכירות כפי שקיבל אותה, צבועה בלבן, נקייה וללא נזקים (למעט בלאי סביר).
                                        השוכר אחראי לתיקון נזקים שנגרמו באשמתו. המשכיר אחראי לתיקון בלאי סביר ותשתיות (פיצוץ צנרת, דוד שמש וכו').
                                    </p>
                                </li>

                                <li>
                                    <strong>שינויים בדירה:</strong>
                                    <p>אין לבצע שינויים, קידוחים (למעט תליית תמונות סבירה) או תוספות ללא אישור בכתב מהמשכיר.</p>
                                </li>

                                <li>
                                    <strong>בטחונות:</strong>
                                    <p>
                                        להבטחת התחייבויותיו, יפקיד השוכר בידי המשכיר צ'ק ביטחון / ערבות בנקאית ע"ס {data.securityDeposit} ₪, וכן צ'קים פתוחים ללא סכום לפקודת העירייה, חברת החשמל, תאגיד המים וועד הבית.
                                    </p>
                                </li>

                                <li>
                                    <strong>אי-תחולת דיני הגנת הדייר:</strong>
                                    <p>
                                        השוכר מצהיר כי השכירות אינה מוגנת לפי חוק הגנת הדייר וכי לא שילם דמי מפתח.
                                    </p>
                                </li>

                                <li>
                                    <strong>הפרת חוזה:</strong>
                                    <p>
                                        אי תשלום שכ"ד במועד, או אי פינוי הדירה בזמן, יהוו הפרה יסודית המקנה למשכיר זכות לבטל את החוזה ולפנות את השוכר לאלתר. פיגור בפינוי יחייב את השוכר בפיצוי מוסכם של פי 3 מדמי השכירות היומיים לכל יום איחור.
                                    </p>
                                </li>
                            </ol>

                            {/* חתימות */}
                            <div className="mt-16 mb-12 signature-block">
                                <h3 className="font-bold mb-6">ולראיה באו הצדדים על החתום:</h3>
                                <div className="grid grid-cols-2 gap-20">
                                    <div className="text-center">
                                        <div className="h-16 border-b border-black mb-2"></div>
                                        <div className="font-bold">המשכיר: {data.landlordName}</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="h-16 border-b border-black mb-2"></div>
                                        <div className="font-bold">השוכר: {data.tenantName}</div>
                                    </div>
                                </div>
                            </div>
                            
                            {/* מעבר עמוד לפני הנספח */}
                            <div className="break-before-page"></div> 
                            
                            {/* נספח א' */}
                            <div className="mt-8 border-t-2 border-dashed border-gray-300 pt-8 no-print:border-none">
                                <h2 className="text-2xl font-bold underline mb-4 text-center">נספח א' - רשימת תכולה</h2>
                                <p className="mb-4">הפריטים הבאים נמצאים בדירה במועד המסירה ועל השוכר להחזירם במצב תקין:</p>
                                
                                <table className="w-full border-collapse border border-black">
                                    <thead>
                                        <tr className="bg-gray-100">
                                            <th className="border border-black p-2 w-16 text-center">#</th>
                                            <th className="border border-black p-2 text-right">תיאור הפריט</th>
                                            <th className="border border-black p-2 w-32 text-center">תקין (מסמן V)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {inventory.map((item, idx) => (
                                            <tr key={idx}>
                                                <td className="border border-black p-2 text-center">{idx + 1}</td>
                                                <td className="border border-black p-2">{item}</td>
                                                <td className="border border-black p-2"></td>
                                            </tr>
                                        ))}
                                        {[...Array(3)].map((_, i) => (
                                        <tr key={`empty-${i}`}>
                                        <td className="border border-black p-2 text-center">{inventory.length + i + 1}</td>
                                        <td className="border border-black p-2"></td>
                                        <td className="border border-black p-2"></td>
                                        </tr>
                                        ))}
                                    </tbody>
                                </table>
                                
                                <div className="mt-12 flex justify-between px-10 signature-block">
                                    <div>חתימת המשכיר: ______________</div>
                                    <div>חתימת השוכר: ______________</div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SmartContractLawyer />);
    </script>
</body>
</html>
