<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>BI Magics • Demo Hub משופר</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css"/>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js" defer></script> <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/tsparticles@3.4.0/tsparticles.bundle.min.js" defer></script> <style>
/* ============ THEME ============ */
:root {
 --bg-start: #0c0c12;
 --bg-end: #14141c;
 --card: #1e1e28;
 --border: #2f2f42;
 --accent: #6eee9e; /* Mint Green */
 /* Alternative Accents (Uncomment to try) */
 /* --accent: #7f7bff; /* Lavender Blue */
 /* --accent: #ff8c42; /* Tangerine */
 --text: #e9e9f1;
 --radius: 16px; /* Slightly larger radius */
 --shadow: 0 8px 22px rgba(0, 0, 0, 0.5); /* Softer, larger shadow */
 font-family: 'Inter', Arial, sans-serif;
 font-size: 15px;
 scroll-behavior: smooth;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  background: linear-gradient(145deg, var(--bg-start), var(--bg-end));
  color: var(--text);
  overflow-x: hidden;
  min-height: 100vh;
}

#tsparticles {
  position: fixed;
  inset: 0;
  z-index: -2;
}

/* ============ TOP NAV ============ */
.top-nav {
  position: sticky;
  top: 0;
  z-index: 30;
  display: flex;
  justify-content: center;
  gap: 5vw; /* Adjusted gap */
  padding: 14px 0; /* Increased padding */
  background: #10101acc;
  backdrop-filter: blur(8px); /* Slightly more blur */
  border-bottom: 1px solid #23232f;
}

.top-nav button {
  all: unset;
  cursor: pointer;
  font-weight: 600; /* Bolder */
  opacity: 0.6;
  border-bottom: 3px solid transparent; /* Thicker border */
  padding-bottom: 4px;
  transition: opacity 0.3s ease, color 0.3s ease, border-color 0.3s ease; /* Smooth transition */
}

.top-nav button:hover {
    opacity: 0.8;
}

.top-nav button.active {
  opacity: 1;
  color: var(--accent);
  border-color: var(--accent);
}

@media (min-width: 600px) {
  .top-nav {
    gap: 36px; /* Increased gap */
    font-size: 17px; /* Slightly larger */
  }
}

/* ============ WRAPPER ============ */
.views {
  display: flex;
  width: 400%;
  transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1); /* Smoother easing */
  touch-action: pan-y; /* Allow vertical scroll while swiping */
}

.view {
  flex: 0 0 100%;
  min-height: calc(100vh - 57px); /* Adjust for nav height */
  padding: 40px 5vw 120px; /* Adjusted padding */
  overflow-y: auto;
}

@media (min-width: 700px) {
  .view {
    padding: 60px 40px 140px; /* Adjusted padding */
  }
}

/* ============ CARD ============ */
.bi-card {
  position: relative;
  margin-bottom: 32px; /* Consistent margin */
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 24px 26px 72px; /* Increased padding */
  overflow: hidden;
  transition: transform 0.3s ease, box-shadow 0.3s ease; /* Hover transition */
}

.bi-card:hover {
    transform: translateY(-4px) scale(1.01); /* Subtle lift and scale on hover */
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.6);
}

/* Holo effect */
.bi-card::before {
  content: "";
  position: absolute;
  inset: -1px; /* Cover border */
  border-radius: inherit;
  pointer-events: none;
  background: linear-gradient(135deg, transparent 30%, var(--accent) 50%, transparent 70%);
  background-size: 300% 300%; /* Slower, larger gradient */
  opacity: 0.1; /* More subtle */
  animation: holo 10s linear infinite; /* Slower animation */
  z-index: 1; /* Above content but below actions */
}

@keyframes holo {
  0% { background-position: 0% 100%; }
  50% { background-position: 100% 0%; }
  100% { background-position: 0% 100%; }
}


.card-content { /* Added wrapper for content to be above holo */
    position: relative;
    z-index: 2;
}

.card-title {
  font-weight: 600;
  margin-bottom: 12px;
  font-size: 18px; /* Larger title */
}

/* KPI styles */
.kpi-big {
  font-size: clamp(32px, 10vw, 54px);
  font-weight: 700;
  margin-bottom: 4px;
  color: #fff;
  display: block; /* Ensure it takes full width */
}

.kpi-small {
  opacity: 0.75;
  font-size: 14px; /* Slightly larger */
}

/* progress */
.progress {
  height: 12px; /* Thicker bar */
  background: #333344; /* Darker background */
  border-radius: 8px;
  margin-top: 10px;
  overflow: hidden;
  position: relative; /* For pseudo-element animation */
}

.progress > div {
  height: 100%;
  background: var(--accent);
  border-radius: 8px 0 0 8px; /* Keep left radius */
  position: relative; /* Needed for z-index */
  overflow: hidden; /* To contain the shine */
}

/* Shine animation for progress bar */
.progress > div::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 40px; /* Width of the shine */
    height: 100%;
    background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.25) 50%, rgba(255,255,255,0) 100%);
    animation: progress-shine 2.5s infinite linear;
    opacity: 0.8;
}

@keyframes progress-shine {
    0% { transform: translateX(-50px); } /* Start off-screen left */
    100% { transform: translateX(300px); } /* Move across typical bar widths */
}


/* table */
.table-wrap {
  overflow-x: auto;
  margin-top: 15px;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 10px 12px; /* More padding */
  border-bottom: 1px solid #2d2d38;
  text-align: right; /* Changed to right for Hebrew */
  font-size: 15px; /* Larger font */
  white-space: nowrap; /* Prevent wrapping */
}

th {
  color: var(--accent);
  font-weight: 600;
  text-align: right; /* Changed to right */
}

td:first-child, th:first-child {
    text-align: right; /* Ensure first column is right-aligned */
}

/* toolbar */
.card-actions {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 60px; /* Taller actions bar */
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px; /* More padding */
  background: #15151dcc;
  border-top: 1px solid #292935;
  backdrop-filter: blur(6px);
  z-index: 3; /* Ensure actions are above holo */
}

.icon-btn {
  all: unset;
  display: flex;
  align-items: center;
  gap: 6px; /* Increased gap */
  cursor: pointer;
  font-size: 16px; /* Larger icons */
  transition: color 0.3s ease, transform 0.2s ease; /* Smooth transition */
}
.icon-btn:hover {
  color: var(--accent);
  transform: scale(1.1); /* Pop effect on hover */
}
.icon-btn:active {
    transform: scale(0.95); /* Press effect */
}

.icon-btn.like i {
    transition: color 0.3s ease, transform 0.3s ease;
}

.icon-btn.like.liked i {
  color: #ff6b81; /* Pinkish red for liked */
  font-weight: 900; /* Make solid icon bolder */
  animation: heartBeat 0.4s ease;
}

@keyframes heartBeat {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); }
    100% { transform: scale(1); }
}

.views-count {
  opacity: 0.7;
  font-size: 14px; /* Larger */
  display: flex;
  align-items: center;
  gap: 5px;
}

/* GRID */
.grid {
  display: grid;
  gap: 24px; /* Increased gap */
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
}

@media (min-width: 600px) {
  .grid {
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); /* Larger min size */
  }
}

/* CHAT */
.chat-box {
  max-width: 550px; /* Slightly wider */
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 12px; /* Increased gap */
  padding: 0 10px; /* Padding for small screens */
}

.msg {
  padding: 10px 15px; /* More padding */
  border-radius: 18px; /* More rounded */
  font-size: 15px; /* Larger font */
  max-width: 85%;
  line-height: 1.5; /* Better readability */
}

.user {
  align-self: flex-end;
  background: #3a3a50; /* Slightly different user color */
  color: #f0f0f0;
  border-bottom-right-radius: 6px; /* Bubble tail */
}

.bot {
  align-self: flex-start;
  background: #252535; /* Slightly different bot color */
  border-bottom-left-radius: 6px; /* Bubble tail */
}

/* fallback fade */
.aos-init:not(.aos-animate) {
  opacity: 0;
  transform: translateY(20px); /* Add slight upward animation */
}

/* Custom Scrollbar (WebKit browsers) */
.view::-webkit-scrollbar {
    width: 8px;
}
.view::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 4px;
}
.view::-webkit-scrollbar-thumb {
    background-color: rgba(110, 238, 158, 0.3); /* Accent color, semi-transparent */
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: content-box;
}
.view::-webkit-scrollbar-thumb:hover {
    background-color: rgba(110, 238, 158, 0.5);
}

</style>
</head>
<body>

<canvas id="tsparticles"></canvas>

<nav class="top-nav">
 <button data-i="0" class="active">פיד</button>
 <button data-i="1">צ'אט</button>
 <button data-i="2">חיבורים</button>
 <button data-i="3">מרקט</button>
</nav>

<div class="views" id="views">

 <section class="view" id="feed">
   <article class="bi-card" data-aos="fade-up">
     <div class="card-content">
         <span class="kpi-big">$12.47 M</span>
         <span class="kpi-small">הכנסות · 12 חודשים אחרונים</span>
     </div>
     <div class="card-actions">
         <button class="icon-btn like" aria-label="Like this KPI">
             <i class="fa-regular fa-heart"></i> </button>
         <span class="views-count"><i class="fa-regular fa-eye"></i> 1.2 K</span>
     </div>
   </article>

   <article class="bi-card" data-aos="fade-up" data-aos-delay="100">
     <div class="card-content">
         <h3 class="card-title">הכנסות מול יעד</h3>
         <div class="kpi-small">$1.48 M / $1.60 M</div>
         <div class="progress"><div style="width:92%"></div></div>
     </div>
     <div class="card-actions">
         <button class="icon-btn" aria-label="Add to favorites"><i class="fa-regular fa-star"></i></button>
         <span class="views-count"><i class="fa-regular fa-eye"></i> 875</span>
     </div>
   </article>

   <article class="bi-card" data-aos="fade-up" data-aos-delay="150">
     <div class="card-content">
         <h3 class="card-title">מכירות לפי אזור</h3>
         <canvas id="regionPie" height="240"></canvas> </div>
     <div class="card-actions">
        <button class="icon-btn" aria-label="Share"><i class="fa-regular fa-share-square"></i></button>
        <span class="views-count"><i class="fa-regular fa-eye"></i> 2.1 K</span>
     </div>
   </article>

   <article class="bi-card" data-aos="fade-up" data-aos-delay="200">
      <div class="card-content">
          <h3 class="card-title">הרשמות יומיות</h3>
          <canvas id="trendLine" height="240"></canvas> </div>
       <div class="card-actions">
        <button class="icon-btn" aria-label="Download data"><i class="fa-solid fa-download"></i></button>
        <span class="views-count"><i class="fa-regular fa-eye"></i> 1.8 K</span>
     </div>
   </article>

   <article class="bi-card" data-aos="fade-up" data-aos-delay="250">
     <div class="card-content">
         <h3 class="card-title">לקוחות מובילים</h3>
         <div class="table-wrap">
             <table>
                 <thead><tr><th>$</th><th>לקוח</th></tr></thead> <tbody>
                     <tr><td>1.2 M</td><td>אקמי בע"מ</td></tr>
                     <tr><td>985 K</td><td>גלובקס קורפ</td></tr>
                     <tr><td>712 K</td><td>אמברלה בע"מ</td></tr>
                 </tbody>
             </table>
         </div>
     </div>
      <div class="card-actions">
        <button class="icon-btn" aria-label="More details"><i class="fa-solid fa-ellipsis"></i></button>
        <span class="views-count"><i class="fa-regular fa-eye"></i> 650</span>
     </div>
   </article>
 </section>

 <section class="view">
   <h2 style="text-align:center;margin-bottom:32px" data-aos="fade-up">💬 הדגמת ChatBI</h2>
   <div class="chat-box" data-aos="fade-up" data-aos-delay="100">
     <div class="bot msg">שאל אותי על הדאטה שלך 👋</div>
     <div class="user msg">הצג הכנסות לרבעון Q1</div>
     <div class="bot msg">הכנסות רבעון Q1 2025 הן <strong>$3.4 M</strong>, עליה של 18% משנה שעברה.</div>
     <div class="user msg">מי הלקוח הגדול ביותר החודש?</div>
      <div class="bot msg">אני בודק... הלקוח הגדול ביותר החודש הוא 'אקמי בע"מ' עם $280K.</div>
   </div>
 </section>

 <section class="view">
   <h2 style="text-align:center;margin-bottom:32px" data-aos="fade-up">🔌 חיבורים למקורות מידע</h2>
   <div class="grid">
     <div class="bi-card" data-aos="zoom-in"><div class="card-content"><h3 class="card-title">BigQuery</h3><p class="kpi-small">מחובר ✅</p></div></div>
     <div class="bi-card" data-aos="zoom-in" data-aos-delay="100"><div class="card-content"><h3 class="card-title">Sheets</h3><p class="kpi-small">חיבור בקליק</p></div></div>
     <div class="bi-card" data-aos="zoom-in" data-aos-delay="150"><div class="card-content"><h3 class="card-title">Snowflake</h3><p class="kpi-small">בטא</p></div></div>
     <div class="bi-card" data-aos="zoom-in" data-aos-delay="200"><div class="card-content"><h3 class="card-title">Salesforce</h3><p class="kpi-small">בקרוב</p></div></div>
     <div class="bi-card" data-aos="zoom-in" data-aos-delay="250"><div class="card-content"><h3 class="card-title">Databricks</h3><p class="kpi-small">חדש!</p></div></div>
   </div>
 </section>

 <section class="view">
   <h2 style="text-align:center;margin-bottom:32px" data-aos="fade-up">🛒 מרקטפלייס דאטה</h2>
   <div class="grid">
     <div class="bi-card" data-aos="zoom-in"><div class="card-content"><h3 class="card-title">מפקד אוכלוסין US 2024</h3><p class="kpi-small">חינם · 560 MB</p></div></div>
     <div class="bi-card" data-aos="zoom-in" data-aos-delay="100"><div class="card-content"><h3 class="card-title">מחירי קריפטו בזמן אמת</h3><p class="kpi-small">$49/לחודש</p></div></div>
     <div class="bi-card" data-aos="zoom-in" data-aos-delay="150"><div class="card-content"><h3 class="card-title">היסטוריית מזג אוויר</h3><p class="kpi-small">מסלול חינמי</p></div></div>
      <div class="bi-card" data-aos="zoom-in" data-aos-delay="200"><div class="card-content"><h3 class="card-title">נתוני תנועה עירונית</h3><p class="kpi-small">בטא · חינם</p></div></div>
   </div>
 </section>

</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  /* particles */
  tsParticles.load("tsparticles", {
    particles: {
      number: { value: 40, density: { enable: true, area: 800 } }, // Fewer particles
      color: { value: "#ffffff" }, // White particles
      shape: { type: "circle" },
      opacity: { value: {min: 0.1, max: 0.4}, animation: { enable: true, speed: 0.8, sync: false } }, // Fading effect
      size: { value: { min: 1, max: 3 } }, // Smaller particles
      links: {
        enable: true,
        distance: 150,
        color: "var(--accent)", // Use accent color for links
        opacity: 0.15, // More subtle links
        width: 1
      },
      move: {
        enable: true,
        speed: 0.8, // Slower movement
        direction: "none",
        random: true,
        straight: false,
        outModes: { default: "out" },
      }
    },
    interactivity: {
        events: {
            onHover: { enable: true, mode: "grab" }, // Grab effect on hover
            onClick: { enable: true, mode: "push" } // Push particles on click
        },
        modes: {
            grab: { distance: 140, links: { opacity: 0.3 } },
            push: { quantity: 3 }
        }
    },
    detectRetina: true,
    fullScreen: { enable: false } // Keep it constrained to body
  });


  /* AOS */
  AOS.init({ once: true, duration: 700, offset: 100, easing: 'ease-out-cubic' }); // Changed easing


  /* nav + swipe */
  const wrap = document.getElementById("views");
  const btns = document.querySelectorAll(".top-nav button");
  let cur = 0; // Current view index
  let isDragging = false;
  let startX, currentTranslate, windowWidth;

  const go = (index, smooth = true) => {
    cur = (index + btns.length) % btns.length; // Ensure index wraps around correctly
    wrap.style.transition = smooth ? 'transform 0.5s cubic-bezier(0.25, 1, 0.5, 1)' : 'none';
    wrap.style.transform = `translateX(${-100 * cur}%)`;
    btns.forEach(b => b.classList.toggle("active", +b.dataset.i === cur));
    // Re-trigger AOS animations for the newly visible view if needed (optional)
    // AOS.refresh(); // Consider calling this if elements load dynamically
  };

  btns.forEach(b => b.onclick = () => go(+b.dataset.i));

  const dragStart = (e) => {
    startX = e.pageX || e.touches[0].pageX;
    isDragging = true;
    windowWidth = window.innerWidth;
    // Get the current transform value (it might be mid-animation)
    const transformMatrix = window.getComputedStyle(wrap).transform;
    if (transformMatrix !== 'none') {
        currentTranslate = parseFloat(transformMatrix.split(',')[4]);
    } else {
        currentTranslate = -100 * cur * windowWidth / 100; // Calculate from index if 'none'
    }
    wrap.style.transition = "none"; // Disable transition during drag
  };

  const dragMove = (e) => {
    if (!isDragging) return;
    const currentX = e.pageX || e.touches[0].pageX;
    const diffX = currentX - startX;
    // Translate based on the drag difference, relative to window width
    wrap.style.transform = `translateX(${currentTranslate + diffX}px)`;
  };

  const dragEnd = (e) => {
    if (!isDragging) return;
    isDragging = false;
    const endX = e.pageX || e.changedTouches[0].pageX;
    const diffX = endX - startX;
    const threshold = windowWidth * 0.15; // Require 15% swipe to change view

    wrap.style.transition = 'transform 0.5s cubic-bezier(0.25, 1, 0.5, 1)'; // Re-enable smooth transition

    if (diffX < -threshold) {
      go(cur + 1); // Swipe left
    } else if (diffX > threshold) {
      go(cur - 1); // Swipe right
    } else {
      go(cur); // Snap back to current view
    }
  };

  // Use pointer events for unified mouse/touch handling
  wrap.addEventListener("pointerdown", dragStart, { passive: true });
  document.addEventListener("pointermove", dragMove, { passive: true }); // Listen on document to capture movement outside the wrap
  document.addEventListener("pointerup", dragEnd);
  document.addEventListener("pointercancel", dragEnd); // Handle cancelled drags


  /* charts */
  const rnd = (m, n) => Math.floor(Math.random() * (n - m + 1)) + m;
  const ctx = (id) => document.getElementById(id)?.getContext("2d");

  // Common Chart Options
  const commonChartOptions = {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
          legend: {
              position: 'bottom',
              labels: {
                  color: 'var(--text)', // Use theme text color
                  padding: 15, // Add padding to legend labels
                  font: { size: 13 }
              }
          },
          tooltip: {
              backgroundColor: 'rgba(0, 0, 0, 0.7)', // Darker tooltip
              titleColor: 'var(--accent)',
              bodyColor: 'var(--text)',
              padding: 10,
              cornerRadius: 4,
              boxPadding: 4
          }
      },
      // Default font color for scales
      color: 'rgba(233, 233, 241, 0.7)' // var(--text) with alpha
  };

  // Pie Chart
  const regionCtx = ctx("regionPie");
  if (regionCtx) {
    new Chart(regionCtx, {
      type: "pie",
      data: {
        labels: ["צפון אמריקה", "EMEA", "אסיה-פסיפיק", "אמריקה הלטינית"], // Localized labels
        datasets: [{
          data: [38, 26, 22, 14],
          backgroundColor: [ // Define custom colors if needed
                'rgba(110, 238, 158, 0.7)', // Accent color with alpha
                'rgba(127, 123, 255, 0.7)', // Lavender Blue with alpha
                'rgba(255, 140, 66, 0.7)',  // Tangerine with alpha
                'rgba(90, 180, 255, 0.7)'   // Light Blue with alpha
            ],
            borderColor: 'var(--card)', // Match card background for separation
            borderWidth: 2
        }]
      },
      options: { ...commonChartOptions } // Use common options
    });
  }

  // Line Chart (Trend)
  const trendCtx = ctx("trendLine");
  if (trendCtx) {
    const months = Array.from({ length: 30 }, (_, i) => `יום ${i + 1}`); // Sample labels
    new Chart(trendCtx, {
      type: "line",
      data: {
        labels: months,
        datasets: [{
          label: 'הרשמות', // Add a label for the dataset
          data: months.map(() => rnd(120, 430)),
          fill: true,
          tension: 0.4, // Slightly smoother curve
          borderColor: 'var(--accent)',
          backgroundColor: 'rgba(110, 238, 158, 0.15)', // Subtle fill
          pointBackgroundColor: 'var(--accent)',
          pointBorderColor: '#fff',
          pointHoverBackgroundColor: '#fff',
          pointHoverBorderColor: 'var(--accent)',
          pointRadius: 3, // Smaller points
          pointHoverRadius: 6 // Larger hover points
        }]
      },
      options: {
        ...commonChartOptions, // Use common options
        plugins: { // Override legend for line chart if needed
            ...commonChartOptions.plugins,
            legend: { display: false } // Hide legend for single dataset line chart
        },
        scales: {
            y: {
                beginAtZero: true,
                grid: {
                    color: 'rgba(255, 255, 255, 0.1)' // Lighter grid lines
                },
                ticks: { color: 'var(--text)' }
            },
            x: {
                grid: {
                    display: false // Hide x-axis grid lines
                },
                ticks: { color: 'var(--text)' }
            }
        }
      }
    });
  }

  /* Like Button Interactivity */
  document.querySelectorAll('.icon-btn.like').forEach(button => {
      button.addEventListener('click', () => {
          const icon = button.querySelector('i');
          button.classList.toggle('liked');
          if (button.classList.contains('liked')) {
              icon.classList.remove('fa-regular');
              icon.classList.add('fa-solid'); // Change to solid heart
               button.setAttribute('aria-label', 'Unlike this KPI');
          } else {
              icon.classList.remove('fa-solid');
              icon.classList.add('fa-regular'); // Change back to regular heart
               button.setAttribute('aria-label', 'Like this KPI');
          }
      });
  });

});
</script>

</body>
</html>
